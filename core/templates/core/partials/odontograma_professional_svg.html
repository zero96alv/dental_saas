{% load math_filters %}
<svg id="odontograma-svg" width="100%" viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg" style="background-color: #f8f9fa; border-radius: 8px;">
    <!-- Definiciones de Iconos para superponer -->
    <defs>
        <g id="icono-caries" fill="#c92a2a">
            <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
        </g>
        <g id="icono-implante" fill="#1971c2">
            <path d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5zM4 1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V1z"/>
        </g>
        <g id="icono-corona" fill="#e67700">
            <path d="M8.812.563a1.5 1.5 0 0 0-1.624 0L4.375 2.313l-1.062.562a1.5 1.5 0 0 0-.813 1.313v2.5a1.5 1.5 0 0 0 .813 1.313l1.062.562 2.813 1.75a1.5 1.5 0 0 0 1.624 0l2.813-1.75 1.062-.562a1.5 1.5 0 0 0 .813-1.313v-2.5a1.5 1.5 0 0 0-.813-1.313l-1.062-.562L8.812.563z"/>
        </g>
    </defs>

    <!-- GuÃ­as de Cuadrantes -->
    <line x1="400" y1="20" x2="400" y2="380" stroke="#ced4da" stroke-width="2"/>
    <line x1="50" y1="200" x2="750" y2="200" stroke="#ced4da" stroke-width="2"/>
    <text x="385" y="35" text-anchor="end" font-size="16" fill="#adb5bd" font-weight="bold">1</text>
    <text x="415" y="35" text-anchor="start" font-size="16" fill="#adb5bd" font-weight="bold">2</text>
    <text x="385" y="375" text-anchor="end" font-size="16" fill="#adb5bd" font-weight="bold">4</text>
    <text x="415" y="375" text-anchor="start" font-size="16" fill="#adb5bd" font-weight="bold">3</text>

    <!-- Dientes Superiores -->
    <g id="cuadrante-1">
        {% for i in "87654321" %}
        <g class="diente" id="diente-1{{ i }}" transform="translate({{ 400|subtract:i|multiply:45|add:25 }}, 120)">
            <path d="M-15,0 a15,20 0 1,1 30,0 v20 a2,2 0 0,1 -2,2 h-26 a2,2 0 0,1 -2,-2 z" fill="#ffffff"/>
            <text class="numero-diente" y="15" x="0">1{{ i }}</text>
            <g class="icono-container" transform="translate(-8, -15) scale(1.8)"></g>
        </g>
        {% endfor %}
    </g>
    <g id="cuadrante-2">
        {% for i in "12345678" %}
        <g class="diente" id="diente-2{{ i }}" transform="translate({{ 400|add:i|multiply:45|subtract:25 }}, 120)">
            <path d="M-15,0 a15,20 0 1,1 30,0 v20 a2,2 0 0,1 -2,2 h-26 a2,2 0 0,1 -2,-2 z" fill="#ffffff"/>
            <text class="numero-diente" y="15" x="0">2{{ i }}</text>
            <g class="icono-container" transform="translate(-8, -15) scale(1.8)"></g>
        </g>
        {% endfor %}
    </g>

    <!-- Dientes Inferiores -->
    <g id="cuadrante-4">
        {% for i in "87654321" %}
        <g class="diente" id="diente-4{{ i }}" transform="translate({{ 400|subtract:i|multiply:45|add:25 }}, 280) scale(1, -1)">
            <path d="M-15,0 a15,20 0 1,1 30,0 v20 a2,2 0 0,1 -2,2 h-26 a2,2 0 0,1 -2,-2 z" fill="#ffffff"/>
            <text class="numero-diente" y="15" x="0" transform="scale(1, -1)">4{{ i }}</text>
            <g class="icono-container" transform="translate(-8, -15) scale(1.8)"></g>
        </g>
        {% endfor %}
    </g>
    <g id="cuadrante-3">
        {% for i in "12345678" %}
        <g class="diente" id="diente-3{{ i }}" transform="translate({{ 400|add:i|multiply:45|subtract:25 }}, 280) scale(1, -1)">
            <path d="M-15,0 a15,20 0 1,1 30,0 v20 a2,2 0 0,1 -2,2 h-26 a2,2 0 0,1 -2,-2 z" fill="#ffffff"/>
            <text class="numero-diente" y="15" x="0" transform="scale(1, -1)">3{{ i }}</text>
            <g class="icono-container" transform="translate(-8, -15) scale(1.8)"></g>
        </g>
        {% endfor %}
    </g>
</svg>
