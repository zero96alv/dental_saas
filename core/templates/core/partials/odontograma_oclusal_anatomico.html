{% load math_filters %}
<div id="odontograma-oclusal-anatomico" class="odontograma-oclusal-anatomico">
    <style>
        .odontograma-oclusal-anatomico {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            font-family: 'Arial', sans-serif;
            background: #f8f6f0;
            border-radius: 15px;
            box-shadow: 0 6px 25px rgba(0,0,0,0.1);
        }
        
        .odontograma-oclusal-anatomico svg {
            width: 100%;
            height: auto;
            background: #f8f6f0;
            border-radius: 10px;
        }
        
        /* Fondo de encías más realista con textura */
        .encia-superior-anatomica {
            fill: url(#gradientEnciaAnatomicaSuperior);
            opacity: 0.85;
        }
        
        .encia-inferior-anatomica {
            fill: url(#gradientEnciaAnatomicaInferior);
            opacity: 0.85;
        }
        
        /* Líneas de división */
        .linea-central-anatomica {
            stroke: #2c3e50;
            stroke-width: 2.5;
            opacity: 0.7;
        }
        
        .linea-horizontal-anatomica {
            stroke: #2c3e50;
            stroke-width: 2;
            opacity: 0.6;
        }
        
        /* Dientes anatómicos base */
        .diente-anatomico {
            cursor: pointer;
            transition: all 0.3s ease;
            filter: drop-shadow(0 1px 3px rgba(0,0,0,0.2));
        }
        
        .diente-anatomico:hover {
            filter: drop-shadow(0 0 8px rgba(52, 152, 219, 0.8)) drop-shadow(0 1px 3px rgba(0,0,0,0.2));
            transform: scale(1.06);
        }
        
        .diente-anatomico.selected {
            filter: drop-shadow(0 0 15px rgba(241, 196, 15, 1)) drop-shadow(0 1px 3px rgba(0,0,0,0.2));
            transform: scale(1.08);
        }
        
        /* Superficies oclusales base */
        .superficie-oclusal {
            fill: #f8f5f0;
            stroke: #34495e;
            stroke-width: 1.2;
        }
        
        /* INCISIVOS CENTRALES - Forma rectangular con borde incisal */
        .incisivo-central-superior .superficie-oclusal {
            fill: #fafaf8;
        }
        
        .incisivo-central-inferior .superficie-oclusal {
            fill: #f9f9f7;
        }
        
        /* INCISIVOS LATERALES - Más pequeños y estrechos */
        .incisivo-lateral-superior .superficie-oclusal {
            fill: #fbfbf9;
        }
        
        .incisivo-lateral-inferior .superficie-oclusal {
            fill: #fafaf8;
        }
        
        /* CANINOS - Forma triangular puntiaguda */
        .canino-superior .superficie-oclusal {
            fill: #fcfcfa;
        }
        
        .canino-inferior .superficie-oclusal {
            fill: #fbfbf9;
        }
        
        /* PREMOLARES - Forma ovalada con cúspides */
        .premolar-superior .superficie-oclusal {
            fill: #fafaf8;
        }
        
        .premolar-inferior .superficie-oclusal {
            fill: #f9f9f7;
        }
        
        /* MOLARES - Formas cuadradas con múltiples cúspides */
        .molar-superior .superficie-oclusal {
            fill: #f8f8f6;
        }
        
        .molar-inferior .superficie-oclusal {
            fill: #f7f7f5;
        }
        
        /* Líneas anatómicas internas */
        .cuspide-principal {
            stroke: #bdc3c7;
            stroke-width: 1;
            opacity: 0.8;
            fill: none;
        }
        
        .fisura-central {
            stroke: #95a5a6;
            stroke-width: 0.8;
            opacity: 0.9;
            fill: none;
        }
        
        .fisura-secundaria {
            stroke: #bdc3c7;
            stroke-width: 0.6;
            opacity: 0.7;
            fill: none;
        }
        
        /* Estados de diagnóstico */
        .diente-anatomico.sano .superficie-oclusal { fill: #27ae60; }
        .diente-anatomico.caries .superficie-oclusal { fill: #e74c3c; }
        .diente-anatomico.obturada .superficie-oclusal { fill: #f39c12; }
        .diente-anatomico.corona .superficie-oclusal { fill: #3498db; }
        .diente-anatomico.extraida .superficie-oclusal { 
            fill: #7f8c8d; 
            stroke-dasharray: 4,3;
            opacity: 0.4;
        }
        .diente-anatomico.implante .superficie-oclusal { fill: #1abc9c; }
        .diente-anatomico.endodoncia .superficie-oclusal { fill: #e91e63; }
        
        /* Numeración */
        .numero-anatomico {
            font-family: 'Arial', sans-serif;
            font-size: 11px;
            font-weight: bold;
            fill: #2c3e50;
            text-anchor: middle;
            dominant-baseline: central;
            pointer-events: none;
        }
        
        /* Etiquetas direccionales */
        .etiqueta-anatomica {
            font-family: 'Arial', sans-serif;
            font-size: 16px;
            font-weight: bold;
            fill: #2c3e50;
            text-anchor: middle;
        }
        
        .etiqueta-lateral-anatomica {
            font-family: 'Arial', sans-serif;
            font-size: 12px;
            font-weight: 600;
            fill: #34495e;
            text-anchor: middle;
        }
    </style>
    
    <div class="text-center mb-4">
        <h4 style="color: #2c3e50; margin-bottom: 8px; font-weight: 700;">
            🦷 Odontograma Oclusal Anatómico Real
        </h4>
        <p style="color: #34495e; font-size: 0.95rem;">
            Vista oclusal desde arriba - Anatomía dental realista con cúspides y fisuras
        </p>
    </div>
    
    <svg viewBox="0 0 1000 700" xmlns="http://www.w3.org/2000/svg">
        <!-- Definir gradientes para encías más realistas -->
        <defs>
            <radialGradient id="gradientEnciaAnatomicaSuperior" cx="50%" cy="25%" r="75%">
                <stop offset="0%" style="stop-color:#f4d4c1;stop-opacity:1" />
                <stop offset="30%" style="stop-color:#e8c2a9;stop-opacity:1" />
                <stop offset="70%" style="stop-color:#d4a574;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#c19660;stop-opacity:1" />
            </radialGradient>
            <radialGradient id="gradientEnciaAnatomicaInferior" cx="50%" cy="75%" r="75%">
                <stop offset="0%" style="stop-color:#f4d4c1;stop-opacity:1" />
                <stop offset="30%" style="stop-color:#e8c2a9;stop-opacity:1" />
                <stop offset="70%" style="stop-color:#d4a574;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#c19660;stop-opacity:1" />
            </radialGradient>
        </defs>
        
        <!-- Fondo principal -->
        <rect width="1000" height="700" fill="#f8f6f0"/>
        
        <!-- ==================== ENCÍAS ANATÓMICAS ==================== -->
        
        <!-- Encía superior con forma de herradura más realista -->
        <path d="M 120 200 Q 150 120 250 100 Q 350 85 500 85 Q 650 85 750 100 Q 850 120 880 200 Q 870 280 800 300 Q 700 320 500 320 Q 300 320 200 300 Q 130 280 120 200 Z" class="encia-superior-anatomica"/>
        
        <!-- Encía inferior con forma de herradura más realista -->
        <path d="M 120 500 Q 130 420 200 400 Q 300 380 500 380 Q 700 380 800 400 Q 870 420 880 500 Q 850 580 750 600 Q 650 615 500 615 Q 350 615 250 600 Q 150 580 120 500 Z" class="encia-inferior-anatomica"/>
        
        <!-- Líneas de división -->
        <line x1="500" y1="50" x2="500" y2="650" class="linea-central-anatomica"/>
        <line x1="50" y1="350" x2="950" y2="350" class="linea-horizontal-anatomica"/>
        
        <!-- Etiquetas direccionales -->
        <text x="500" y="35" class="etiqueta-anatomica">Superior</text>
        <text x="500" y="680" class="etiqueta-anatomica">Inferior</text>
        <text x="80" y="355" class="etiqueta-lateral-anatomica">Derecha</text>
        <text x="920" y="355" class="etiqueta-lateral-anatomica">Izquierda</text>
        <text x="80" y="375" class="etiqueta-lateral-anatomica">Paciente</text>
        <text x="920" y="375" class="etiqueta-lateral-anatomica">Paciente</text>
        
        <!-- ==================== DIENTES SUPERIORES ANATÓMICOS ==================== -->
        
        <!-- CUADRANTE SUPERIOR DERECHO (18-11) -->
        
        <!-- Diente 18 - Tercer Molar Superior -->
        <g class="diente-anatomico molar-superior" id="diente-18">
            <path d="M 135 180 Q 145 165 160 165 Q 175 165 185 180 Q 185 200 175 215 Q 160 220 145 215 Q 135 200 135 180 Z" class="superficie-oclusal"/>
            <!-- Cúspides del molar -->
            <path d="M 140 175 Q 150 170 160 175 Q 170 170 180 175" class="cuspide-principal"/>
            <path d="M 140 195 Q 150 190 160 195 Q 170 190 180 195" class="cuspide-principal"/>
            <line x1="150" y1="170" x2="150" y2="200" class="fisura-central"/>
            <line x1="170" y1="170" x2="170" y2="200" class="fisura-central"/>
            <line x1="145" y1="185" x2="175" y2="185" class="fisura-secundaria"/>
            <text x="160" y="190" class="numero-anatomico">18</text>
        </g>
        
        <!-- Diente 17 - Segundo Molar Superior -->
        <g class="diente-anatomico molar-superior" id="diente-17">
            <path d="M 195 165 Q 205 150 220 150 Q 235 150 245 165 Q 245 185 235 200 Q 220 205 205 200 Q 195 185 195 165 Z" class="superficie-oclusal"/>
            <path d="M 200 160 Q 210 155 220 160 Q 230 155 240 160" class="cuspide-principal"/>
            <path d="M 200 180 Q 210 175 220 180 Q 230 175 240 180" class="cuspide-principal"/>
            <line x1="210" y1="155" x2="210" y2="185" class="fisura-central"/>
            <line x1="230" y1="155" x2="230" y2="185" class="fisura-central"/>
            <line x1="205" y1="170" x2="235" y2="170" class="fisura-secundaria"/>
            <text x="220" y="175" class="numero-anatomico">17</text>
        </g>
        
        <!-- Diente 16 - Primer Molar Superior -->
        <g class="diente-anatomico molar-superior" id="diente-16">
            <path d="M 255 150 Q 265 135 280 135 Q 295 135 305 150 Q 305 170 295 185 Q 280 190 265 185 Q 255 170 255 150 Z" class="superficie-oclusal"/>
            <path d="M 260 145 Q 270 140 280 145 Q 290 140 300 145" class="cuspide-principal"/>
            <path d="M 260 165 Q 270 160 280 165 Q 290 160 300 165" class="cuspide-principal"/>
            <line x1="270" y1="140" x2="270" y2="170" class="fisura-central"/>
            <line x1="290" y1="140" x2="290" y2="170" class="fisura-central"/>
            <line x1="265" y1="155" x2="295" y2="155" class="fisura-secundaria"/>
            <text x="280" y="160" class="numero-anatomico">16</text>
        </g>
        
        <!-- Diente 15 - Segundo Premolar Superior -->
        <g class="diente-anatomico premolar-superior" id="diente-15">
            <ellipse cx="330" cy="140" rx="16" ry="12" class="superficie-oclusal"/>
            <path d="M 318 135 Q 330 130 342 135" class="cuspide-principal"/>
            <path d="M 318 145 Q 330 150 342 145" class="cuspide-principal"/>
            <line x1="330" y1="132" x2="330" y2="148" class="fisura-central"/>
            <text x="330" y="140" class="numero-anatomico">15</text>
        </g>
        
        <!-- Diente 14 - Primer Premolar Superior -->
        <g class="diente-anatomico premolar-superior" id="diente-14">
            <ellipse cx="365" cy="135" rx="15" ry="11" class="superficie-oclusal"/>
            <path d="M 354 130 Q 365 125 376 130" class="cuspide-principal"/>
            <path d="M 354 140 Q 365 145 376 140" class="cuspide-principal"/>
            <line x1="365" y1="127" x2="365" y2="143" class="fisura-central"/>
            <text x="365" y="135" class="numero-anatomico">14</text>
        </g>
        
        <!-- Diente 13 - Canino Superior -->
        <g class="diente-anatomico canino-superior" id="diente-13">
            <path d="M 395 140 Q 405 120 415 140 Q 412 155 405 160 Q 398 155 395 140 Z" class="superficie-oclusal"/>
            <path d="M 400 135 Q 405 125 410 135" class="cuspide-principal"/>
            <text x="405" y="145" class="numero-anatomico">13</text>
        </g>
        
        <!-- Diente 12 - Incisivo Lateral Superior -->
        <g class="diente-anatomico incisivo-lateral-superior" id="diente-12">
            <rect x="430" y="135" width="16" height="12" rx="2" class="superficie-oclusal"/>
            <line x1="433" y1="141" x2="443" y2="141" class="fisura-secundaria"/>
            <text x="438" y="141" class="numero-anatomico">12</text>
        </g>
        
        <!-- Diente 11 - Incisivo Central Superior -->
        <g class="diente-anatomico incisivo-central-superior" id="diente-11">
            <rect x="460" y="132" width="18" height="14" rx="2" class="superficie-oclusal"/>
            <line x1="463" y1="139" x2="475" y2="139" class="fisura-secundaria"/>
            <text x="469" y="139" class="numero-anatomico">11</text>
        </g>
        
        <!-- CUADRANTE SUPERIOR IZQUIERDO (21-28) -->
        
        <!-- Diente 21 - Incisivo Central Superior -->
        <g class="diente-anatomico incisivo-central-superior" id="diente-21">
            <rect x="522" y="132" width="18" height="14" rx="2" class="superficie-oclusal"/>
            <line x1="525" y1="139" x2="537" y2="139" class="fisura-secundaria"/>
            <text x="531" y="139" class="numero-anatomico">21</text>
        </g>
        
        <!-- Diente 22 - Incisivo Lateral Superior -->
        <g class="diente-anatomico incisivo-lateral-superior" id="diente-22">
            <rect x="554" y="135" width="16" height="12" rx="2" class="superficie-oclusal"/>
            <line x1="557" y1="141" x2="567" y2="141" class="fisura-secundaria"/>
            <text x="562" y="141" class="numero-anatomico">22</text>
        </g>
        
        <!-- Diente 23 - Canino Superior -->
        <g class="diente-anatomico canino-superior" id="diente-23">
            <path d="M 585 140 Q 595 120 605 140 Q 602 155 595 160 Q 588 155 585 140 Z" class="superficie-oclusal"/>
            <path d="M 590 135 Q 595 125 600 135" class="cuspide-principal"/>
            <text x="595" y="145" class="numero-anatomico">23</text>
        </g>
        
        <!-- Diente 24 - Primer Premolar Superior -->
        <g class="diente-anatomico premolar-superior" id="diente-24">
            <ellipse cx="635" cy="135" rx="15" ry="11" class="superficie-oclusal"/>
            <path d="M 624 130 Q 635 125 646 130" class="cuspide-principal"/>
            <path d="M 624 140 Q 635 145 646 140" class="cuspide-principal"/>
            <line x1="635" y1="127" x2="635" y2="143" class="fisura-central"/>
            <text x="635" y="135" class="numero-anatomico">24</text>
        </g>
        
        <!-- Diente 25 - Segundo Premolar Superior -->
        <g class="diente-anatomico premolar-superior" id="diente-25">
            <ellipse cx="670" cy="140" rx="16" ry="12" class="superficie-oclusal"/>
            <path d="M 658 135 Q 670 130 682 135" class="cuspide-principal"/>
            <path d="M 658 145 Q 670 150 682 145" class="cuspide-principal"/>
            <line x1="670" y1="132" x2="670" y2="148" class="fisura-central"/>
            <text x="670" y="140" class="numero-anatomico">25</text>
        </g>
        
        <!-- Diente 26 - Primer Molar Superior -->
        <g class="diente-anatomico molar-superior" id="diente-26">
            <path d="M 695 150 Q 705 135 720 135 Q 735 135 745 150 Q 745 170 735 185 Q 720 190 705 185 Q 695 170 695 150 Z" class="superficie-oclusal"/>
            <path d="M 700 145 Q 710 140 720 145 Q 730 140 740 145" class="cuspide-principal"/>
            <path d="M 700 165 Q 710 160 720 165 Q 730 160 740 165" class="cuspide-principal"/>
            <line x1="710" y1="140" x2="710" y2="170" class="fisura-central"/>
            <line x1="730" y1="140" x2="730" y2="170" class="fisura-central"/>
            <line x1="705" y1="155" x2="735" y2="155" class="fisura-secundaria"/>
            <text x="720" y="160" class="numero-anatomico">26</text>
        </g>
        
        <!-- Diente 27 - Segundo Molar Superior -->
        <g class="diente-anatomico molar-superior" id="diente-27">
            <path d="M 755 165 Q 765 150 780 150 Q 795 150 805 165 Q 805 185 795 200 Q 780 205 765 200 Q 755 185 755 165 Z" class="superficie-oclusal"/>
            <path d="M 760 160 Q 770 155 780 160 Q 790 155 800 160" class="cuspide-principal"/>
            <path d="M 760 180 Q 770 175 780 180 Q 790 175 800 180" class="cuspide-principal"/>
            <line x1="770" y1="155" x2="770" y2="185" class="fisura-central"/>
            <line x1="790" y1="155" x2="790" y2="185" class="fisura-central"/>
            <line x1="765" y1="170" x2="795" y2="170" class="fisura-secundaria"/>
            <text x="780" y="175" class="numero-anatomico">27</text>
        </g>
        
        <!-- Diente 28 - Tercer Molar Superior -->
        <g class="diente-anatomico molar-superior" id="diente-28">
            <path d="M 815 180 Q 825 165 840 165 Q 855 165 865 180 Q 865 200 855 215 Q 840 220 825 215 Q 815 200 815 180 Z" class="superficie-oclusal"/>
            <path d="M 820 175 Q 830 170 840 175 Q 850 170 860 175" class="cuspide-principal"/>
            <path d="M 820 195 Q 830 190 840 195 Q 850 190 860 195" class="cuspide-principal"/>
            <line x1="830" y1="170" x2="830" y2="200" class="fisura-central"/>
            <line x1="850" y1="170" x2="850" y2="200" class="fisura-central"/>
            <line x1="825" y1="185" x2="855" y2="185" class="fisura-secundaria"/>
            <text x="840" y="190" class="numero-anatomico">28</text>
        </g>
        
        <!-- ==================== DIENTES INFERIORES ANATÓMICOS ==================== -->
        
        <!-- CUADRANTE INFERIOR DERECHO (48-41) -->
        
        <!-- Diente 48 - Tercer Molar Inferior -->
        <g class="diente-anatomico molar-inferior" id="diente-48">
            <path d="M 135 520 Q 145 505 160 505 Q 175 505 185 520 Q 185 540 175 555 Q 160 560 145 555 Q 135 540 135 520 Z" class="superficie-oclusal"/>
            <path d="M 140 515 Q 150 510 160 515 Q 170 510 180 515" class="cuspide-principal"/>
            <path d="M 140 535 Q 150 530 160 535 Q 170 530 180 535" class="cuspide-principal"/>
            <line x1="150" y1="510" x2="150" y2="540" class="fisura-central"/>
            <line x1="170" y1="510" x2="170" y2="540" class="fisura-central"/>
            <line x1="145" y1="525" x2="175" y2="525" class="fisura-secundaria"/>
            <text x="160" y="530" class="numero-anatomico">48</text>
        </g>
        
        <!-- Diente 47 - Segundo Molar Inferior -->
        <g class="diente-anatomico molar-inferior" id="diente-47">
            <path d="M 195 505 Q 205 490 220 490 Q 235 490 245 505 Q 245 525 235 540 Q 220 545 205 540 Q 195 525 195 505 Z" class="superficie-oclusal"/>
            <path d="M 200 500 Q 210 495 220 500 Q 230 495 240 500" class="cuspide-principal"/>
            <path d="M 200 520 Q 210 515 220 520 Q 230 515 240 520" class="cuspide-principal"/>
            <line x1="210" y1="495" x2="210" y2="525" class="fisura-central"/>
            <line x1="230" y1="495" x2="230" y2="525" class="fisura-central"/>
            <line x1="205" y1="510" x2="235" y2="510" class="fisura-secundaria"/>
            <text x="220" y="515" class="numero-anatomico">47</text>
        </g>
        
        <!-- Diente 46 - Primer Molar Inferior -->
        <g class="diente-anatomico molar-inferior" id="diente-46">
            <path d="M 255 490 Q 265 475 280 475 Q 295 475 305 490 Q 305 510 295 525 Q 280 530 265 525 Q 255 510 255 490 Z" class="superficie-oclusal"/>
            <path d="M 260 485 Q 270 480 280 485 Q 290 480 300 485" class="cuspide-principal"/>
            <path d="M 260 505 Q 270 500 280 505 Q 290 500 300 505" class="cuspide-principal"/>
            <line x1="270" y1="480" x2="270" y2="510" class="fisura-central"/>
            <line x1="290" y1="480" x2="290" y2="510" class="fisura-central"/>
            <line x1="265" y1="495" x2="295" y2="495" class="fisura-secundaria"/>
            <text x="280" y="500" class="numero-anatomico">46</text>
        </g>
        
        <!-- Diente 45 - Segundo Premolar Inferior -->
        <g class="diente-anatomico premolar-inferior" id="diente-45">
            <ellipse cx="330" cy="480" rx="16" ry="12" class="superficie-oclusal"/>
            <path d="M 318 475 Q 330 470 342 475" class="cuspide-principal"/>
            <path d="M 318 485 Q 330 490 342 485" class="cuspide-principal"/>
            <line x1="330" y1="472" x2="330" y2="488" class="fisura-central"/>
            <text x="330" y="480" class="numero-anatomico">45</text>
        </g>
        
        <!-- Diente 44 - Primer Premolar Inferior -->
        <g class="diente-anatomico premolar-inferior" id="diente-44">
            <ellipse cx="365" cy="485" rx="15" ry="11" class="superficie-oclusal"/>
            <path d="M 354 480 Q 365 475 376 480" class="cuspide-principal"/>
            <path d="M 354 490 Q 365 495 376 490" class="cuspide-principal"/>
            <line x1="365" y1="477" x2="365" y2="493" class="fisura-central"/>
            <text x="365" y="485" class="numero-anatomico">44</text>
        </g>
        
        <!-- Diente 43 - Canino Inferior -->
        <g class="diente-anatomico canino-inferior" id="diente-43">
            <path d="M 395 500 Q 405 480 415 500 Q 412 515 405 520 Q 398 515 395 500 Z" class="superficie-oclusal"/>
            <path d="M 400 495 Q 405 485 410 495" class="cuspide-principal"/>
            <text x="405" y="505" class="numero-anatomico">43</text>
        </g>
        
        <!-- Diente 42 - Incisivo Lateral Inferior -->
        <g class="diente-anatomico incisivo-lateral-inferior" id="diente-42">
            <rect x="430" y="505" width="16" height="12" rx="2" class="superficie-oclusal"/>
            <line x1="433" y1="511" x2="443" y2="511" class="fisura-secundaria"/>
            <text x="438" y="511" class="numero-anatomico">42</text>
        </g>
        
        <!-- Diente 41 - Incisivo Central Inferior -->
        <g class="diente-anatomico incisivo-central-inferior" id="diente-41">
            <rect x="460" y="508" width="18" height="14" rx="2" class="superficie-oclusal"/>
            <line x1="463" y1="515" x2="475" y2="515" class="fisura-secundaria"/>
            <text x="469" y="515" class="numero-anatomico">41</text>
        </g>
        
        <!-- CUADRANTE INFERIOR IZQUIERDO (31-38) -->
        
        <!-- Diente 31 - Incisivo Central Inferior -->
        <g class="diente-anatomico incisivo-central-inferior" id="diente-31">
            <rect x="522" y="508" width="18" height="14" rx="2" class="superficie-oclusal"/>
            <line x1="525" y1="515" x2="537" y2="515" class="fisura-secundaria"/>
            <text x="531" y="515" class="numero-anatomico">31</text>
        </g>
        
        <!-- Diente 32 - Incisivo Lateral Inferior -->
        <g class="diente-anatomico incisivo-lateral-inferior" id="diente-32">
            <rect x="554" y="505" width="16" height="12" rx="2" class="superficie-oclusal"/>
            <line x1="557" y1="511" x2="567" y2="511" class="fisura-secundaria"/>
            <text x="562" y="511" class="numero-anatomico">32</text>
        </g>
        
        <!-- Diente 33 - Canino Inferior -->
        <g class="diente-anatomico canino-inferior" id="diente-33">
            <path d="M 585 500 Q 595 480 605 500 Q 602 515 595 520 Q 588 515 585 500 Z" class="superficie-oclusal"/>
            <path d="M 590 495 Q 595 485 600 495" class="cuspide-principal"/>
            <text x="595" y="505" class="numero-anatomico">33</text>
        </g>
        
        <!-- Diente 34 - Primer Premolar Inferior -->
        <g class="diente-anatomico premolar-inferior" id="diente-34">
            <ellipse cx="635" cy="485" rx="15" ry="11" class="superficie-oclusal"/>
            <path d="M 624 480 Q 635 475 646 480" class="cuspide-principal"/>
            <path d="M 624 490 Q 635 495 646 490" class="cuspide-principal"/>
            <line x1="635" y1="477" x2="635" y2="493" class="fisura-central"/>
            <text x="635" y="485" class="numero-anatomico">34</text>
        </g>
        
        <!-- Diente 35 - Segundo Premolar Inferior -->
        <g class="diente-anatomico premolar-inferior" id="diente-35">
            <ellipse cx="670" cy="480" rx="16" ry="12" class="superficie-oclusal"/>
            <path d="M 658 475 Q 670 470 682 475" class="cuspide-principal"/>
            <path d="M 658 485 Q 670 490 682 485" class="cuspide-principal"/>
            <line x1="670" y1="472" x2="670" y2="488" class="fisura-central"/>
            <text x="670" y="480" class="numero-anatomico">35</text>
        </g>
        
        <!-- Diente 36 - Primer Molar Inferior -->
        <g class="diente-anatomico molar-inferior" id="diente-36">
            <path d="M 695 490 Q 705 475 720 475 Q 735 475 745 490 Q 745 510 735 525 Q 720 530 705 525 Q 695 510 695 490 Z" class="superficie-oclusal"/>
            <path d="M 700 485 Q 710 480 720 485 Q 730 480 740 485" class="cuspide-principal"/>
            <path d="M 700 505 Q 710 500 720 505 Q 730 500 740 505" class="cuspide-principal"/>
            <line x1="710" y1="480" x2="710" y2="510" class="fisura-central"/>
            <line x1="730" y1="480" x2="730" y2="510" class="fisura-central"/>
            <line x1="705" y1="495" x2="735" y2="495" class="fisura-secundaria"/>
            <text x="720" y="500" class="numero-anatomico">36</text>
        </g>
        
        <!-- Diente 37 - Segundo Molar Inferior -->
        <g class="diente-anatomico molar-inferior" id="diente-37">
            <path d="M 755 505 Q 765 490 780 490 Q 795 490 805 505 Q 805 525 795 540 Q 780 545 765 540 Q 755 525 755 505 Z" class="superficie-oclusal"/>
            <path d="M 760 500 Q 770 495 780 500 Q 790 495 800 500" class="cuspide-principal"/>
            <path d="M 760 520 Q 770 515 780 520 Q 790 515 800 520" class="cuspide-principal"/>
            <line x1="770" y1="495" x2="770" y2="525" class="fisura-central"/>
            <line x1="790" y1="495" x2="790" y2="525" class="fisura-central"/>
            <line x1="765" y1="510" x2="795" y2="510" class="fisura-secundaria"/>
            <text x="780" y="515" class="numero-anatomico">37</text>
        </g>
        
        <!-- Diente 38 - Tercer Molar Inferior -->
        <g class="diente-anatomico molar-inferior" id="diente-38">
            <path d="M 815 520 Q 825 505 840 505 Q 855 505 865 520 Q 865 540 855 555 Q 840 560 825 555 Q 815 540 815 520 Z" class="superficie-oclusal"/>
            <path d="M 820 515 Q 830 510 840 515 Q 850 510 860 515" class="cuspide-principal"/>
            <path d="M 820 535 Q 830 530 840 535 Q 850 530 860 535" class="cuspide-principal"/>
            <line x1="830" y1="510" x2="830" y2="540" class="fisura-central"/>
            <line x1="850" y1="510" x2="850" y2="540" class="fisura-central"/>
            <line x1="825" y1="525" x2="855" y2="525" class="fisura-secundaria"/>
            <text x="840" y="530" class="numero-anatomico">38</text>
        </g>
        
    </svg>
</div>

<script>
(function() {
    'use strict';
    
    function log(mensaje) {
        console.log(`[ODONTOGRAMA OCLUSAL ANATÓMICO] ${mensaje}`);
    }
    
    document.addEventListener('DOMContentLoaded', function() {
        log('Iniciando odontograma oclusal anatómico real');
        
        const dientes = document.querySelectorAll('.diente-anatomico');
        log(`Configurando ${dientes.length} dientes con anatomía oclusal realista`);
        
        dientes.forEach(function(diente, index) {
            const dienteId = diente.id;
            const numeroFDI = dienteId.replace('diente-', '');
            const cuadrante = Math.floor(numeroFDI / 10);
            const posicion = numeroFDI % 10;
            
            // Determinar el tipo de diente con clasificación anatómica
            let tipoDiente = '';
            let tipoAnatomico = '';
            if (posicion === 1) {
                tipoDiente = 'Incisivo Central';
                tipoAnatomico = cuadrante <= 2 ? 'incisivo-central-superior' : 'incisivo-central-inferior';
            } else if (posicion === 2) {
                tipoDiente = 'Incisivo Lateral';
                tipoAnatomico = cuadrante <= 2 ? 'incisivo-lateral-superior' : 'incisivo-lateral-inferior';
            } else if (posicion === 3) {
                tipoDiente = 'Canino';
                tipoAnatomico = cuadrante <= 2 ? 'canino-superior' : 'canino-inferior';
            } else if (posicion === 4) {
                tipoDiente = 'Primer Premolar';
                tipoAnatomico = cuadrante <= 2 ? 'premolar-superior' : 'premolar-inferior';
            } else if (posicion === 5) {
                tipoDiente = 'Segundo Premolar';
                tipoAnatomico = cuadrante <= 2 ? 'premolar-superior' : 'premolar-inferior';
            } else if (posicion === 6) {
                tipoDiente = 'Primer Molar';
                tipoAnatomico = cuadrante <= 2 ? 'molar-superior' : 'molar-inferior';
            } else if (posicion === 7) {
                tipoDiente = 'Segundo Molar';
                tipoAnatomico = cuadrante <= 2 ? 'molar-superior' : 'molar-inferior';
            } else if (posicion === 8) {
                tipoDiente = 'Tercer Molar';
                tipoAnatomico = cuadrante <= 2 ? 'molar-superior' : 'molar-inferior';
            }
            
            diente.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                log(`Diente anatómico seleccionado: FDI ${numeroFDI} (${tipoDiente}, ${tipoAnatomico})`);
                
                // Remover selección anterior
                document.querySelectorAll('.diente-anatomico').forEach(d => {
                    d.classList.remove('selected');
                });
                
                // Seleccionar diente actual
                diente.classList.add('selected');
                
                // Disparar evento personalizado
                const eventoSeleccion = new CustomEvent('dienteAnatomico​Seleccionado', {
                    detail: {
                        numeroFDI: numeroFDI,
                        cuadrante: cuadrante,
                        posicion: posicion,
                        tipoDiente: tipoDiente,
                        tipoAnatomico: tipoAnatomico,
                        elemento: diente
                    }
                });
                
                document.dispatchEvent(eventoSeleccion);
            });
            
            diente.addEventListener('mouseenter', function() {
                log(`Vista oclusal: Diente FDI ${numeroFDI} (${tipoDiente}) - Anatomía ${tipoAnatomico}`);
            });
        });
        
        log('Odontograma oclusal anatómico inicializado correctamente');
    });
    
    // Función global para aplicar diagnósticos
    window.aplicarDiagnosticoAnatomico = function(numeroFDI, diagnostico) {
        const diente = document.getElementById(`diente-${numeroFDI}`);
        if (diente) {
            // Remover diagnósticos anteriores
            diente.classList.remove('sano', 'caries', 'obturada', 'corona', 'extraida', 'implante', 'endodoncia');
            
            // Aplicar nuevo diagnóstico
            if (diagnostico) {
                diente.classList.add(diagnostico);
                log(`Diagnóstico anatómico aplicado: Diente ${numeroFDI} - ${diagnostico}`);
            }
        }
    };
    
    // Función global para limpiar selecciones
    window.limpiarSeleccionAnatomico = function() {
        document.querySelectorAll('.diente-anatomico').forEach(diente => {
            diente.classList.remove('selected', 'sano', 'caries', 'obturada', 'corona', 'extraida', 'implante', 'endodoncia');
        });
        log('Selección anatómica y diagnósticos limpiados');
    };
    
})();
</script>