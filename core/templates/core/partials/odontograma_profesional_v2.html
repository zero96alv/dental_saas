{% load math_filters %}
<div id="odontograma-profesional" class="odontograma-profesional">
    <style>
        .odontograma-profesional {
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px;
            font-family: 'Segoe UI', Arial, sans-serif;
        }
        
        .odontograma-profesional svg {
            width: 100%;
            height: auto;
            background: linear-gradient(135deg, #f8fdff 0%, #e8f4fd 100%);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 123, 255, 0.15);
            border: 2px solid #e3f2fd;
        }
        
        /* Dientes realistas con formas anat√≥micas */
        .diente-profesional {
            cursor: pointer;
            transition: all 0.2s ease;
            transform-origin: center;
        }
        
        .diente-profesional:hover {
            filter: drop-shadow(0 0 12px rgba(33, 150, 243, 0.8));
        }
        
        .diente-profesional.selected {
            filter: drop-shadow(0 0 15px rgba(255, 193, 7, 1));
        }
        
        /* Formas de dientes m√°s realistas */
        .diente-shape {
            fill: #ffffff;
            stroke: #37474f;
            stroke-width: 1.5;
            transition: all 0.2s ease;
        }
        
        /* Gradientes para dar profundidad */
        .diente-shape.with-gradient {
            fill: url(#dienteGradient);
        }
        
        .diente-numero {
            font-family: 'Arial', sans-serif;
            font-size: 10px;
            font-weight: bold;
            fill: #263238;
            text-anchor: middle;
            pointer-events: none;
            dominant-baseline: central;
        }
        
        /* Estados de diagn√≥stico con colores profesionales */
        .diente-profesional.sano .diente-shape { 
            fill: #4caf50;
            stroke: #2e7d32;
        }
        .diente-profesional.caries .diente-shape { 
            fill: #f44336;
            stroke: #c62828;
        }
        .diente-profesional.obturada .diente-shape { 
            fill: #ff9800;
            stroke: #ef6c00;
        }
        .diente-profesional.corona .diente-shape { 
            fill: #2196f3;
            stroke: #1565c0;
        }
        .diente-profesional.extraida .diente-shape { 
            fill: #9e9e9e;
            stroke: #424242;
            stroke-dasharray: 5,3;
            opacity: 0.7;
        }
        .diente-profesional.implante .diente-shape { 
            fill: #00bcd4;
            stroke: #006064;
            stroke-width: 2.5;
        }
        .diente-profesional.endodoncia .diente-shape { 
            fill: #e91e63;
            stroke: #ad1457;
        }
        
        /* Supernumerarios m√°s sutiles */
        .supernumerario .diente-shape {
            stroke: #ff5722;
            stroke-dasharray: 3,2;
            opacity: 0.8;
        }
        
        .supernumerario .diente-numero {
            fill: #ff5722;
            font-size: 8px;
        }
        
        /* Elementos de la boca */
        .boca-outline {
            fill: none;
            stroke: #90a4ae;
            stroke-width: 2;
            opacity: 0.6;
        }
        
        .gingiva {
            fill: #ffcdd2;
            stroke: #f8bbd9;
            stroke-width: 1;
            opacity: 0.4;
        }
        
        .lengua-outline {
            fill: #ffab91;
            stroke: #ff8a65;
            stroke-width: 1;
            opacity: 0.3;
        }
        
        .etiqueta-profesional {
            font-family: 'Segoe UI', Arial, sans-serif;
            font-size: 14px;
            font-weight: 600;
            fill: #455a64;
            text-anchor: middle;
        }
        
        /* L√≠neas gu√≠a */
        .linea-guia {
            stroke: #cfd8dc;
            stroke-width: 1;
            stroke-dasharray: 3,3;
            opacity: 0.5;
        }
        
        /* Responsivo */
        @media (max-width: 768px) {
            .diente-numero {
                font-size: 8px;
            }
            .etiqueta-profesional {
                font-size: 12px;
            }
        }
    </style>
    
    <div class="text-center mb-3">
        <h4 style="color: #37474f; margin-bottom: 10px; font-weight: 600;">
            ü¶∑ Odontograma Profesional - 48 Dientes
        </h4>
        <p style="color: #78909c; font-size: 0.9rem;">Haz clic en cualquier diente para seleccionarlo</p>
    </div>
    
    <svg viewBox="0 0 1400 800" xmlns="http://www.w3.org/2000/svg">
        <!-- Definir gradientes y patrones -->
        <defs>
            <!-- Gradiente para dientes -->
            <linearGradient id="dienteGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#ffffff;stop-opacity:1" />
                <stop offset="50%" style="stop-color:#f5f5f5;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#eeeeee;stop-opacity:1" />
            </linearGradient>
            
            <!-- Gradiente para enc√≠as -->
            <linearGradient id="gingivalGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                <stop offset="0%" style="stop-color:#ffcdd2;stop-opacity:0.3" />
                <stop offset="100%" style="stop-color:#f8bbd9;stop-opacity:0.6" />
            </linearGradient>
        </defs>
        
        <!-- Fondo con gradiente sutil -->
        <rect width="1400" height="800" fill="url(#dienteGradient)" opacity="0.1"/>
        
        <!-- Contorno de la boca -->
        <ellipse cx="700" cy="400" rx="550" ry="320" class="boca-outline"/>
        
        <!-- Enc√≠as superior e inferior -->
        <ellipse cx="700" cy="280" rx="480" ry="60" fill="url(#gingivalGradient)" class="gingiva"/>
        <ellipse cx="700" cy="520" rx="480" ry="60" fill="url(#gingivalGradient)" class="gingiva"/>
        
        <!-- Lengua (opcional, sutil) -->
        <ellipse cx="700" cy="450" rx="200" ry="80" class="lengua-outline"/>
        
        <!-- L√≠nea central de referencia -->
        <line x1="700" y1="150" x2="700" y2="650" class="linea-guia"/>
        
        <!-- Etiquetas -->
        <text x="700" y="120" class="etiqueta-profesional">ARCADA SUPERIOR</text>
        <text x="700" y="720" class="etiqueta-profesional">ARCADA INFERIOR</text>
        
        <!-- ============================= ARCADA SUPERIOR ============================= -->
        <!-- LADO DERECHO SUPERIOR (1-8) -->
        
        <!-- Tercer molar superior derecho (1) -->
        <g class="diente-profesional" id="diente-1">
            <path d="M 150 200 Q 180 190 210 200 Q 215 220 210 240 Q 180 250 150 240 Q 145 220 150 200 Z" class="diente-shape with-gradient"/>
            <text x="180" y="220" class="diente-numero">1</text>
        </g>
        
        <!-- Segundo molar superior derecho (2) -->
        <g class="diente-profesional" id="diente-2">
            <path d="M 220 205 Q 250 195 280 205 Q 285 225 280 245 Q 250 255 220 245 Q 215 225 220 205 Z" class="diente-shape with-gradient"/>
            <text x="250" y="225" class="diente-numero">2</text>
        </g>
        
        <!-- Primer molar superior derecho (3) -->
        <g class="diente-profesional" id="diente-3">
            <path d="M 290 210 Q 320 200 350 210 Q 355 230 350 250 Q 320 260 290 250 Q 285 230 290 210 Z" class="diente-shape with-gradient"/>
            <text x="320" y="230" class="diente-numero">3</text>
        </g>
        
        <!-- Segundo premolar superior derecho (4) -->
        <g class="diente-profesional" id="diente-4">
            <path d="M 360 215 Q 385 208 410 215 Q 413 232 410 248 Q 385 252 360 248 Q 357 232 360 215 Z" class="diente-shape with-gradient"/>
            <text x="385" y="231" class="diente-numero">4</text>
        </g>
        
        <!-- Primer premolar superior derecho (5) -->
        <g class="diente-profesional" id="diente-5">
            <path d="M 420 220 Q 445 213 470 220 Q 473 237 470 253 Q 445 257 420 253 Q 417 237 420 220 Z" class="diente-shape with-gradient"/>
            <text x="445" y="236" class="diente-numero">5</text>
        </g>
        
        <!-- Canino superior derecho (6) -->
        <g class="diente-profesional" id="diente-6">
            <path d="M 550 225 Q 575 210 600 225 Q 603 245 600 265 Q 575 275 550 265 Q 547 245 550 225 Z" class="diente-shape with-gradient"/>
            <text x="575" y="245" class="diente-numero">6</text>
        </g>
        
        <!-- Incisivo lateral superior derecho (7) -->
        <g class="diente-profesional" id="diente-7">
            <path d="M 600 230 Q 620 220 640 230 Q 642 250 640 270 Q 620 275 600 270 Q 598 250 600 230 Z" class="diente-shape with-gradient"/>
            <text x="620" y="250" class="diente-numero">7</text>
        </g>
        
        <!-- Incisivo central superior derecho (8) -->
        <g class="diente-profesional" id="diente-8">
            <path d="M 640 235 Q 665 225 690 235 Q 692 255 690 275 Q 665 280 640 275 Q 638 255 640 235 Z" class="diente-shape with-gradient"/>
            <text x="665" y="255" class="diente-numero">8</text>
        </g>
        
        <!-- LADO IZQUIERDO SUPERIOR (9-16) -->
        
        <!-- Incisivo central superior izquierdo (9) -->
        <g class="diente-profesional" id="diente-9">
            <path d="M 690 235 Q 715 225 740 235 Q 742 255 740 275 Q 715 280 690 275 Q 688 255 690 235 Z" class="diente-shape with-gradient"/>
            <text x="715" y="255" class="diente-numero">9</text>
        </g>
        
        <!-- Incisivo lateral superior izquierdo (10) -->
        <g class="diente-profesional" id="diente-10">
            <path d="M 740 230 Q 760 220 780 230 Q 782 250 780 270 Q 760 275 740 270 Q 738 250 740 230 Z" class="diente-shape with-gradient"/>
            <text x="760" y="250" class="diente-numero">10</text>
        </g>
        
        <!-- Canino superior izquierdo (11) -->
        <g class="diente-profesional" id="diente-11">
            <path d="M 780 225 Q 805 210 830 225 Q 833 245 830 265 Q 805 275 780 265 Q 777 245 780 225 Z" class="diente-shape with-gradient"/>
            <text x="805" y="245" class="diente-numero">11</text>
        </g>
        
        <!-- Primer premolar superior izquierdo (12) -->
        <g class="diente-profesional" id="diente-12">
            <path d="M 930 220 Q 955 213 980 220 Q 983 237 980 253 Q 955 257 930 253 Q 927 237 930 220 Z" class="diente-shape with-gradient"/>
            <text x="955" y="236" class="diente-numero">12</text>
        </g>
        
        <!-- Segundo premolar superior izquierdo (13) -->
        <g class="diente-profesional" id="diente-13">
            <path d="M 990 215 Q 1015 208 1040 215 Q 1043 232 1040 248 Q 1015 252 990 248 Q 987 232 990 215 Z" class="diente-shape with-gradient"/>
            <text x="1015" y="231" class="diente-numero">13</text>
        </g>
        
        <!-- Primer molar superior izquierdo (14) -->
        <g class="diente-profesional" id="diente-14">
            <path d="M 1050 210 Q 1080 200 1110 210 Q 1115 230 1110 250 Q 1080 260 1050 250 Q 1045 230 1050 210 Z" class="diente-shape with-gradient"/>
            <text x="1080" y="230" class="diente-numero">14</text>
        </g>
        
        <!-- Segundo molar superior izquierdo (15) -->
        <g class="diente-profesional" id="diente-15">
            <path d="M 1120 205 Q 1150 195 1180 205 Q 1185 225 1180 245 Q 1150 255 1120 245 Q 1115 225 1120 205 Z" class="diente-shape with-gradient"/>
            <text x="1150" y="225" class="diente-numero">15</text>
        </g>
        
        <!-- Tercer molar superior izquierdo (16) -->
        <g class="diente-profesional" id="diente-16">
            <path d="M 1190 200 Q 1220 190 1250 200 Q 1255 220 1250 240 Q 1220 250 1190 240 Q 1185 220 1190 200 Z" class="diente-shape with-gradient"/>
            <text x="1220" y="220" class="diente-numero">16</text>
        </g>
        
        <!-- ============================= ARCADA INFERIOR ============================= -->
        <!-- LADO DERECHO INFERIOR (17-24) -->
        
        <!-- Tercer molar inferior derecho (17) -->
        <g class="diente-profesional" id="diente-17">
            <path d="M 150 560 Q 180 550 210 560 Q 215 580 210 600 Q 180 610 150 600 Q 145 580 150 560 Z" class="diente-shape with-gradient"/>
            <text x="180" y="580" class="diente-numero">17</text>
        </g>
        
        <!-- Segundo molar inferior derecho (18) -->
        <g class="diente-profesional" id="diente-18">
            <path d="M 220 555 Q 250 545 280 555 Q 285 575 280 595 Q 250 605 220 595 Q 215 575 220 555 Z" class="diente-shape with-gradient"/>
            <text x="250" y="575" class="diente-numero">18</text>
        </g>
        
        <!-- Primer molar inferior derecho (19) -->
        <g class="diente-profesional" id="diente-19">
            <path d="M 290 550 Q 320 540 350 550 Q 355 570 350 590 Q 320 600 290 590 Q 285 570 290 550 Z" class="diente-shape with-gradient"/>
            <text x="320" y="570" class="diente-numero">19</text>
        </g>
        
        <!-- Segundo premolar inferior derecho (20) -->
        <g class="diente-profesional" id="diente-20">
            <path d="M 360 545 Q 385 538 410 545 Q 413 562 410 578 Q 385 582 360 578 Q 357 562 360 545 Z" class="diente-shape with-gradient"/>
            <text x="385" y="561" class="diente-numero">20</text>
        </g>
        
        <!-- Primer premolar inferior derecho (21) -->
        <g class="diente-profesional" id="diente-21">
            <path d="M 420 540 Q 445 533 470 540 Q 473 557 470 573 Q 445 577 420 573 Q 417 557 420 540 Z" class="diente-shape with-gradient"/>
            <text x="445" y="556" class="diente-numero">21</text>
        </g>
        
        <!-- Canino inferior derecho (22) -->
        <g class="diente-profesional" id="diente-22">
            <path d="M 530 535 Q 555 520 580 535 Q 583 555 580 575 Q 555 585 530 575 Q 527 555 530 535 Z" class="diente-shape with-gradient"/>
            <text x="555" y="555" class="diente-numero">22</text>
        </g>
        
        <!-- Incisivo lateral inferior derecho (23) -->
        <g class="diente-profesional" id="diente-23">
            <path d="M 600 530 Q 620 520 640 530 Q 642 550 640 570 Q 620 575 600 570 Q 598 550 600 530 Z" class="diente-shape with-gradient"/>
            <text x="620" y="550" class="diente-numero">23</text>
        </g>
        
        <!-- Incisivo central inferior derecho (24) -->
        <g class="diente-profesional" id="diente-24">
            <path d="M 640 525 Q 665 515 690 525 Q 692 545 690 565 Q 665 570 640 565 Q 638 545 640 525 Z" class="diente-shape with-gradient"/>
            <text x="665" y="545" class="diente-numero">24</text>
        </g>
        
        <!-- LADO IZQUIERDO INFERIOR (25-32) -->
        
        <!-- Incisivo central inferior izquierdo (25) -->
        <g class="diente-profesional" id="diente-25">
            <path d="M 690 525 Q 715 515 740 525 Q 742 545 740 565 Q 715 570 690 565 Q 688 545 690 525 Z" class="diente-shape with-gradient"/>
            <text x="715" y="545" class="diente-numero">25</text>
        </g>
        
        <!-- Incisivo lateral inferior izquierdo (26) -->
        <g class="diente-profesional" id="diente-26">
            <path d="M 740 530 Q 760 520 780 530 Q 782 550 780 570 Q 760 575 740 570 Q 738 550 740 530 Z" class="diente-shape with-gradient"/>
            <text x="760" y="550" class="diente-numero">26</text>
        </g>
        
        <!-- Canino inferior izquierdo (27) -->
        <g class="diente-profesional" id="diente-27">
            <path d="M 820 535 Q 845 520 870 535 Q 873 555 870 575 Q 845 585 820 575 Q 817 555 820 535 Z" class="diente-shape with-gradient"/>
            <text x="845" y="555" class="diente-numero">27</text>
        </g>
        
        <!-- Primer premolar inferior izquierdo (28) -->
        <g class="diente-profesional" id="diente-28">
            <path d="M 930 540 Q 955 533 980 540 Q 983 557 980 573 Q 955 577 930 573 Q 927 557 930 540 Z" class="diente-shape with-gradient"/>
            <text x="955" y="556" class="diente-numero">28</text>
        </g>
        
        <!-- Segundo premolar inferior izquierdo (29) -->
        <g class="diente-profesional" id="diente-29">
            <path d="M 990 545 Q 1015 538 1040 545 Q 1043 562 1040 578 Q 1015 582 990 578 Q 987 562 990 545 Z" class="diente-shape with-gradient"/>
            <text x="1015" y="561" class="diente-numero">29</text>
        </g>
        
        <!-- Primer molar inferior izquierdo (30) -->
        <g class="diente-profesional" id="diente-30">
            <path d="M 1050 550 Q 1080 540 1110 550 Q 1115 570 1110 590 Q 1080 600 1050 590 Q 1045 570 1050 550 Z" class="diente-shape with-gradient"/>
            <text x="1080" y="570" class="diente-numero">30</text>
        </g>
        
        <!-- Segundo molar inferior izquierdo (31) -->
        <g class="diente-profesional" id="diente-31">
            <path d="M 1120 555 Q 1150 545 1180 555 Q 1185 575 1180 595 Q 1150 605 1120 595 Q 1115 575 1120 555 Z" class="diente-shape with-gradient"/>
            <text x="1150" y="575" class="diente-numero">31</text>
        </g>
        
        <!-- Tercer molar inferior izquierdo (32) -->
        <g class="diente-profesional" id="diente-32">
            <path d="M 1190 560 Q 1220 550 1250 560 Q 1255 580 1250 600 Q 1220 610 1190 600 Q 1185 580 1190 560 Z" class="diente-shape with-gradient"/>
            <text x="1220" y="580" class="diente-numero">32</text>
        </g>
        
        <!-- ====================== SUPERNUMERARIOS (33-48) ====================== -->
        <!-- Organizados en paneles laterales ordenados -->
        
        <!-- Panel izquierdo de supernumerarios -->
        <g class="panel-supernumerarios">
            <!-- Fondo del panel -->
            <rect x="20" y="200" width="80" height="400" rx="10" ry="10" 
                  fill="#f5f5f5" stroke="#ddd" stroke-width="1" opacity="0.7"/>
            <text x="60" y="190" class="etiqueta-profesional" font-size="10">EXTRAS</text>
            
            <!-- Supernumerarios del lado izquierdo (33-40) -->
            <g class="diente-profesional supernumerario" id="diente-33">
                <path d="M 40 220 Q 50 215 60 220 Q 62 230 60 240 Q 50 245 40 240 Q 38 230 40 220 Z" class="diente-shape with-gradient"/>
                <text x="50" y="230" class="diente-numero">33</text>
            </g>
            
            <g class="diente-profesional supernumerario" id="diente-34">
                <path d="M 40 260 Q 50 255 60 260 Q 62 270 60 280 Q 50 285 40 280 Q 38 270 40 260 Z" class="diente-shape with-gradient"/>
                <text x="50" y="270" class="diente-numero">34</text>
            </g>
            
            <g class="diente-profesional supernumerario" id="diente-35">
                <path d="M 40 300 Q 50 295 60 300 Q 62 310 60 320 Q 50 325 40 320 Q 38 310 40 300 Z" class="diente-shape with-gradient"/>
                <text x="50" y="310" class="diente-numero">35</text>
            </g>
            
            <g class="diente-profesional supernumerario" id="diente-36">
                <path d="M 40 340 Q 50 335 60 340 Q 62 350 60 360 Q 50 365 40 360 Q 38 350 40 340 Z" class="diente-shape with-gradient"/>
                <text x="50" y="350" class="diente-numero">36</text>
            </g>
            
            <g class="diente-profesional supernumerario" id="diente-37">
                <path d="M 40 380 Q 50 375 60 380 Q 62 390 60 400 Q 50 405 40 400 Q 38 390 40 380 Z" class="diente-shape with-gradient"/>
                <text x="50" y="390" class="diente-numero">37</text>
            </g>
            
            <g class="diente-profesional supernumerario" id="diente-38">
                <path d="M 40 420 Q 50 415 60 420 Q 62 430 60 440 Q 50 445 40 440 Q 38 430 40 420 Z" class="diente-shape with-gradient"/>
                <text x="50" y="430" class="diente-numero">38</text>
            </g>
            
            <g class="diente-profesional supernumerario" id="diente-39">
                <path d="M 40 460 Q 50 455 60 460 Q 62 470 60 480 Q 50 485 40 480 Q 38 470 40 460 Z" class="diente-shape with-gradient"/>
                <text x="50" y="470" class="diente-numero">39</text>
            </g>
            
            <g class="diente-profesional supernumerario" id="diente-40">
                <path d="M 40 500 Q 50 495 60 500 Q 62 510 60 520 Q 50 525 40 520 Q 38 510 40 500 Z" class="diente-shape with-gradient"/>
                <text x="50" y="510" class="diente-numero">40</text>
            </g>
        </g>
        
        <!-- Panel derecho de supernumerarios -->
        <g class="panel-supernumerarios">
            <!-- Fondo del panel -->
            <rect x="1300" y="200" width="80" height="400" rx="10" ry="10" 
                  fill="#f5f5f5" stroke="#ddd" stroke-width="1" opacity="0.7"/>
            <text x="1340" y="190" class="etiqueta-profesional" font-size="10">EXTRAS</text>
            
            <!-- Supernumerarios del lado derecho (41-48) -->
            <g class="diente-profesional supernumerario" id="diente-41">
                <path d="M 1320 220 Q 1330 215 1340 220 Q 1342 230 1340 240 Q 1330 245 1320 240 Q 1318 230 1320 220 Z" class="diente-shape with-gradient"/>
                <text x="1330" y="230" class="diente-numero">41</text>
            </g>
            
            <g class="diente-profesional supernumerario" id="diente-42">
                <path d="M 1320 260 Q 1330 255 1340 260 Q 1342 270 1340 280 Q 1330 285 1320 280 Q 1318 270 1320 260 Z" class="diente-shape with-gradient"/>
                <text x="1330" y="270" class="diente-numero">42</text>
            </g>
            
            <g class="diente-profesional supernumerario" id="diente-43">
                <path d="M 1320 300 Q 1330 295 1340 300 Q 1342 310 1340 320 Q 1330 325 1320 320 Q 1318 310 1320 300 Z" class="diente-shape with-gradient"/>
                <text x="1330" y="310" class="diente-numero">43</text>
            </g>
            
            <g class="diente-profesional supernumerario" id="diente-44">
                <path d="M 1320 340 Q 1330 335 1340 340 Q 1342 350 1340 360 Q 1330 365 1320 360 Q 1318 350 1320 340 Z" class="diente-shape with-gradient"/>
                <text x="1330" y="350" class="diente-numero">44</text>
            </g>
            
            <g class="diente-profesional supernumerario" id="diente-45">
                <path d="M 1320 380 Q 1330 375 1340 380 Q 1342 390 1340 400 Q 1330 405 1320 400 Q 1318 390 1320 380 Z" class="diente-shape with-gradient"/>
                <text x="1330" y="390" class="diente-numero">45</text>
            </g>
            
            <g class="diente-profesional supernumerario" id="diente-46">
                <path d="M 1320 420 Q 1330 415 1340 420 Q 1342 430 1340 440 Q 1330 445 1320 440 Q 1318 430 1320 420 Z" class="diente-shape with-gradient"/>
                <text x="1330" y="430" class="diente-numero">46</text>
            </g>
            
            <g class="diente-profesional supernumerario" id="diente-47">
                <path d="M 1320 460 Q 1330 455 1340 460 Q 1342 470 1340 480 Q 1330 485 1320 480 Q 1318 470 1320 460 Z" class="diente-shape with-gradient"/>
                <text x="1330" y="470" class="diente-numero">47</text>
            </g>
            
            <g class="diente-profesional supernumerario" id="diente-48">
                <path d="M 1320 500 Q 1330 495 1340 500 Q 1342 510 1340 520 Q 1330 525 1320 520 Q 1318 510 1320 500 Z" class="diente-shape with-gradient"/>
                <text x="1330" y="510" class="diente-numero">48</text>
            </g>
        </g>
    </svg>
</div>

<script>
(function() {
    'use strict';
    
    function log(mensaje) {
        console.log(`[ODONTOGRAMA PROFESIONAL V2] ${mensaje}`);
    }
    
    document.addEventListener('DOMContentLoaded', function() {
        log('Iniciando odontograma profesional v2');
        
        const dientes = document.querySelectorAll('.diente-profesional');
        log(`Configurando ${dientes.length} dientes profesionales`);
        
        dientes.forEach(function(diente, index) {
            diente.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                log(`Clic en ${diente.id}`);
                
                // Quitar selecci√≥n anterior
                document.querySelectorAll('.diente-profesional').forEach(d => {
                    d.classList.remove('selected');
                });
                
                // Seleccionar este diente
                diente.classList.add('selected');
                
                const numero = diente.id.replace('diente-', '');
                log(`Diente profesional ${numero} seleccionado`);
                
                // Emitir evento compatible
                const evento = new CustomEvent('dienteSeleccionado', {
                    detail: { 
                        numero: numero, 
                        elemento: diente,
                        tipo: 'profesional-v2'
                    },
                    bubbles: true
                });
                
                document.dispatchEvent(evento);
                
                // Feedback visual suave (sin distorsi√≥n)
                const shape = diente.querySelector('.diente-shape');
                if (shape) {
                    const originalFilter = shape.style.filter;
                    shape.style.filter = 'brightness(1.2) drop-shadow(0 0 10px #ffeb3b)';
                    setTimeout(() => {
                        shape.style.filter = originalFilter;
                    }, 300);
                }
            });
        });
        
        log('‚úÖ Odontograma profesional v2 listo - 48 dientes con formas realistas');
    });
})();
</script>