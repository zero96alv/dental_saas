{% load math_filters %}
<div id="odontograma-anatomico-correcto" class="odontograma-anatomico-correcto">
    <style>
        .odontograma-anatomico-correcto {
            max-width: 1400px;
            margin: 0 auto;
            padding: 25px;
            font-family: 'Arial', sans-serif;
            background: #f8f6f0;
            border-radius: 20px;
            box-shadow: 0 8px 35px rgba(0,0,0,0.12);
        }
        
        .odontograma-anatomico-correcto svg {
            width: 100%;
            height: auto;
            background: #f8f6f0;
            border-radius: 15px;
        }
        
        /* Arcadas en forma de semielipse realistas */
        .arcada-superior {
            fill: url(#gradientArcadaSuperior);
            opacity: 0.85;
            filter: drop-shadow(0 2px 6px rgba(0,0,0,0.1));
        }
        
        .arcada-inferior {
            fill: url(#gradientArcadaInferior);
            opacity: 0.85;
            filter: drop-shadow(0 2px 6px rgba(0,0,0,0.1));
        }
        
        /* Líneas de división */
        .linea-central {
            stroke: #2c3e50;
            stroke-width: 3;
            opacity: 0.8;
        }
        
        .linea-horizontal {
            stroke: #2c3e50;
            stroke-width: 2.5;
            opacity: 0.7;
        }
        
        /* Dientes con morfología realista */
        .diente-correcto {
            cursor: pointer;
            transition: all 0.3s ease;
            filter: drop-shadow(0 2px 6px rgba(0,0,0,0.15));
        }
        
        .diente-correcto:hover {
            filter: drop-shadow(0 0 12px rgba(52, 152, 219, 0.9)) drop-shadow(0 2px 6px rgba(0,0,0,0.15));
            transform: scale(1.05);
        }
        
        .diente-correcto.selected {
            filter: drop-shadow(0 0 20px rgba(241, 196, 15, 1)) drop-shadow(0 2px 6px rgba(0,0,0,0.15));
            transform: scale(1.07);
        }
        
        /* Superficie oclusal base */
        .superficie-oclusal {
            fill: url(#gradientDienteBase);
            stroke: #8b7355;
            stroke-width: 1.5;
        }
        
        /* MORFOLOGÍA ESPECÍFICA POR TIPO DE DIENTE */
        
        /* INCISIVOS CENTRALES - Forma cincelada aplanada */
        .incisivo-central .superficie-oclusal {
            fill: url(#gradientIncisivoCentral);
        }
        
        /* INCISIVOS LATERALES - Más pequeños y estrechos */
        .incisivo-lateral .superficie-oclusal {
            fill: url(#gradientIncisivoLateral);
        }
        
        /* CANINOS - Forma triangular puntiaguda */
        .canino .superficie-oclusal {
            fill: url(#gradientCanino);
        }
        
        /* PREMOLARES - Forma ovalada con cúspides */
        .premolar .superficie-oclusal {
            fill: url(#gradientPremolar);
        }
        
        /* MOLARES - Forma cuadrada/redondeada, mayor volumen */
        .molar .superficie-oclusal {
            fill: url(#gradientMolar);
        }
        
        /* Líneas anatómicas internas */
        .cuspide-anatomica {
            stroke: #a68b5b;
            stroke-width: 1.2;
            opacity: 0.8;
            fill: none;
        }
        
        .fisura-oclusal {
            stroke: #8b7355;
            stroke-width: 1.5;
            opacity: 0.9;
            fill: none;
        }
        
        /* Estados de diagnóstico */
        .diente-correcto.sano .superficie-oclusal { fill: url(#gradientSano); }
        .diente-correcto.caries .superficie-oclusal { fill: url(#gradientCaries); }
        .diente-correcto.obturada .superficie-oclusal { fill: url(#gradientObturada); }
        .diente-correcto.corona .superficie-oclusal { fill: url(#gradientCorona); }
        .diente-correcto.extraida .superficie-oclusal { 
            fill: url(#gradientExtraida); 
            stroke-dasharray: 5,3;
            opacity: 0.4;
        }
        .diente-correcto.implante .superficie-oclusal { fill: url(#gradientImplante); }
        .diente-correcto.endodoncia .superficie-oclusal { fill: url(#gradientEndodoncia); }
        
        /* Numeración FDI */
        .numero-fdi {
            font-family: 'Arial', sans-serif;
            font-size: 11px;
            font-weight: bold;
            fill: #2c3e50;
            text-anchor: middle;
            dominant-baseline: central;
            pointer-events: none;
            filter: drop-shadow(0 1px 1px rgba(255,255,255,0.8));
        }
        
        /* Etiquetas direccionales */
        .etiqueta-direccional {
            font-family: 'Arial', sans-serif;
            font-size: 18px;
            font-weight: bold;
            fill: #2c3e50;
            text-anchor: middle;
            filter: drop-shadow(0 1px 2px rgba(255,255,255,0.5));
        }
        
        .etiqueta-lateral {
            font-family: 'Arial', sans-serif;
            font-size: 14px;
            font-weight: 600;
            fill: #34495e;
            text-anchor: middle;
            filter: drop-shadow(0 1px 1px rgba(255,255,255,0.3));
        }
    </style>
    
    <div class="text-center mb-4">
        <h4 style="color: #2c3e50; margin-bottom: 10px; font-weight: 800; text-shadow: 0 1px 2px rgba(255,255,255,0.5);">
            🦷 Odontograma Anatómico Correcto
        </h4>
        <p style="color: #34495e; font-size: 1rem; text-shadow: 0 1px 1px rgba(255,255,255,0.3);">
            Arcadas en semielipse con morfología dental realista y espaciado interproximal
        </p>
    </div>
    
    <svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
        <!-- Definir gradientes realistas -->
        <defs>
            <!-- Gradientes para arcadas -->
            <radialGradient id="gradientArcadaSuperior" cx="50%" cy="20%" r="80%">
                <stop offset="0%" style="stop-color:#f4d4c1;stop-opacity:1" />
                <stop offset="40%" style="stop-color:#e8c2a9;stop-opacity:1" />
                <stop offset="80%" style="stop-color:#d4a574;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#c19660;stop-opacity:1" />
            </radialGradient>
            <radialGradient id="gradientArcadaInferior" cx="50%" cy="80%" r="80%">
                <stop offset="0%" style="stop-color:#f4d4c1;stop-opacity:1" />
                <stop offset="40%" style="stop-color:#e8c2a9;stop-opacity:1" />
                <stop offset="80%" style="stop-color:#d4a574;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#c19660;stop-opacity:1" />
            </radialGradient>
            
            <!-- Gradiente base para dientes -->
            <radialGradient id="gradientDienteBase" cx="30%" cy="30%" r="70%">
                <stop offset="0%" style="stop-color:#faf8f4;stop-opacity:1" />
                <stop offset="50%" style="stop-color:#f5f1ea;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#e8ddd0;stop-opacity:1" />
            </radialGradient>
            
            <!-- Gradientes específicos por morfología dental -->
            <radialGradient id="gradientIncisivoCentral" cx="30%" cy="30%" r="70%">
                <stop offset="0%" style="stop-color:#fcfaf7;stop-opacity:1" />
                <stop offset="50%" style="stop-color:#f7f3ec;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#eadfd2;stop-opacity:1" />
            </radialGradient>
            
            <radialGradient id="gradientIncisivoLateral" cx="30%" cy="30%" r="70%">
                <stop offset="0%" style="stop-color:#fbf9f5;stop-opacity:1" />
                <stop offset="50%" style="stop-color:#f6f2ea;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#e9ddd0;stop-opacity:1" />
            </radialGradient>
            
            <radialGradient id="gradientCanino" cx="50%" cy="20%" r="80%">
                <stop offset="0%" style="stop-color:#fcfaf6;stop-opacity:1" />
                <stop offset="50%" style="stop-color:#f7f3eb;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#eadfd1;stop-opacity:1" />
            </radialGradient>
            
            <radialGradient id="gradientPremolar" cx="40%" cy="40%" r="70%">
                <stop offset="0%" style="stop-color:#faf8f3;stop-opacity:1" />
                <stop offset="50%" style="stop-color:#f5f1e8;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#e8dccf;stop-opacity:1" />
            </radialGradient>
            
            <radialGradient id="gradientMolar" cx="40%" cy="40%" r="70%">
                <stop offset="0%" style="stop-color:#f9f6f1;stop-opacity:1" />
                <stop offset="50%" style="stop-color:#f3efe6;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#e6dacc;stop-opacity:1" />
            </radialGradient>
            
            <!-- Gradientes para diagnósticos -->
            <radialGradient id="gradientSano" cx="30%" cy="30%" r="70%">
                <stop offset="0%" style="stop-color:#5dce7a;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#27ae60;stop-opacity:1" />
            </radialGradient>
            <radialGradient id="gradientCaries" cx="30%" cy="30%" r="70%">
                <stop offset="0%" style="stop-color:#ff6b6b;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#e74c3c;stop-opacity:1" />
            </radialGradient>
            <radialGradient id="gradientObturada" cx="30%" cy="30%" r="70%">
                <stop offset="0%" style="stop-color:#ffcd3c;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#f39c12;stop-opacity:1" />
            </radialGradient>
            <radialGradient id="gradientCorona" cx="30%" cy="30%" r="70%">
                <stop offset="0%" style="stop-color:#5dade2;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#3498db;stop-opacity:1" />
            </radialGradient>
            <radialGradient id="gradientExtraida" cx="30%" cy="30%" r="70%">
                <stop offset="0%" style="stop-color:#a6a6a6;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#7f8c8d;stop-opacity:1" />
            </radialGradient>
            <radialGradient id="gradientImplante" cx="30%" cy="30%" r="70%">
                <stop offset="0%" style="stop-color:#58d8c9;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#1abc9c;stop-opacity:1" />
            </radialGradient>
            <radialGradient id="gradientEndodoncia" cx="30%" cy="30%" r="70%">
                <stop offset="0%" style="stop-color:#ff5ac4;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#e91e63;stop-opacity:1" />
            </radialGradient>
        </defs>
        
        <!-- Fondo principal -->
        <rect width="1200" height="800" fill="#f8f6f0"/>
        
        <!-- ==================== ARCADAS EN SEMIELIPSE ==================== -->
        
        <!-- ARCADA SUPERIOR (MAXILAR) - Forma de semielipse amplia -->
        <ellipse cx="600" cy="250" rx="420" ry="130" class="arcada-superior"/>
        
        <!-- ARCADA INFERIOR (MANDIBULAR) - Más estrecha, encaja por dentro -->
        <ellipse cx="600" cy="550" rx="380" ry="120" class="arcada-inferior"/>
        
        <!-- Líneas de división -->
        <line x1="600" y1="80" x2="600" y2="720" class="linea-central"/>
        <line x1="100" y1="400" x2="1100" y2="400" class="linea-horizontal"/>
        
        <!-- Etiquetas direccionales -->
        <text x="600" y="60" class="etiqueta-direccional">Superior</text>
        <text x="600" y="760" class="etiqueta-direccional">Inferior</text>
        <text x="120" y="405" class="etiqueta-lateral">Derecha</text>
        <text x="1080" y="405" class="etiqueta-lateral">Izquierda</text>
        <text x="120" y="425" class="etiqueta-lateral">Paciente</text>
        <text x="1080" y="425" class="etiqueta-lateral">Paciente</text>
        
        <!-- ==================== DIENTES SUPERIORES CON MORFOLOGÍA CORRECTA ==================== -->
        
        <!-- CUADRANTE SUPERIOR DERECHO (18-11) -->
        
        <!-- Diente 18 - Tercer Molar Superior (Molar ligeramente más pequeño) -->
        <g class="diente-correcto molar" id="diente-18">
            <ellipse cx="225" cy="230" rx="20" ry="18" class="superficie-oclusal"/>
            <path d="M 210 220 Q 215 215 220 220 Q 225 215 230 220 Q 235 215 240 220" class="cuspide-anatomica"/>
            <path d="M 210 230 Q 215 225 220 230 Q 225 225 230 230 Q 235 225 240 230" class="cuspide-anatomica"/>
            <path d="M 210 240 Q 215 235 220 240 Q 225 235 230 240 Q 235 235 240 240" class="cuspide-anatomica"/>
            <line x1="215" y1="218" x2="215" y2="242" class="fisura-oclusal"/>
            <line x1="225" y1="218" x2="225" y2="242" class="fisura-oclusal"/>
            <line x1="235" y1="218" x2="235" y2="242" class="fisura-oclusal"/>
            <text x="225" y="230" class="numero-fdi">18</text>
        </g>
        
        <!-- Diente 17 - Segundo Molar Superior (Molar estándar) -->
        <g class="diente-correcto molar" id="diente-17">
            <ellipse cx="270" cy="215" rx="22" ry="20" class="superficie-oclusal"/>
            <path d="M 253 205 Q 258 200 263 205 Q 270 200 277 205 Q 282 200 287 205" class="cuspide-anatomica"/>
            <path d="M 253 215 Q 258 210 263 215 Q 270 210 277 215 Q 282 210 287 215" class="cuspide-anatomica"/>
            <path d="M 253 225 Q 258 220 263 225 Q 270 220 277 225 Q 282 220 287 225" class="cuspide-anatomica"/>
            <line x1="258" y1="203" x2="258" y2="227" class="fisura-oclusal"/>
            <line x1="270" y1="203" x2="270" y2="227" class="fisura-oclusal"/>
            <line x1="282" y1="203" x2="282" y2="227" class="fisura-oclusal"/>
            <text x="270" y="215" class="numero-fdi">17</text>
        </g>
        
        <!-- Diente 16 - Primer Molar Superior (Molar más grande) -->
        <g class="diente-correcto molar" id="diente-16">
            <ellipse cx="320" cy="200" rx="24" ry="22" class="superficie-oclusal"/>
            <path d="M 301 188 Q 306 183 311 188 Q 320 183 329 188 Q 334 183 339 188" class="cuspide-anatomica"/>
            <path d="M 301 200 Q 306 195 311 200 Q 320 195 329 200 Q 334 195 339 200" class="cuspide-anatomica"/>
            <path d="M 301 212 Q 306 207 311 212 Q 320 207 329 212 Q 334 207 339 212" class="cuspide-anatomica"/>
            <line x1="306" y1="186" x2="306" y2="214" class="fisura-oclusal"/>
            <line x1="320" y1="186" x2="320" y2="214" class="fisura-oclusal"/>
            <line x1="334" y1="186" x2="334" y2="214" class="fisura-oclusal"/>
            <text x="320" y="200" class="numero-fdi">16</text>
        </g>
        
        <!-- Diente 15 - Segundo Premolar Superior -->
        <g class="diente-correcto premolar" id="diente-15">
            <ellipse cx="370" cy="190" rx="16" ry="14" class="superficie-oclusal"/>
            <path d="M 358 182 Q 370 177 382 182" class="cuspide-anatomica"/>
            <path d="M 358 198 Q 370 203 382 198" class="cuspide-anatomica"/>
            <line x1="370" y1="179" x2="370" y2="201" class="fisura-oclusal"/>
            <text x="370" y="190" class="numero-fdi">15</text>
        </g>
        
        <!-- Diente 14 - Primer Premolar Superior -->
        <g class="diente-correcto premolar" id="diente-14">
            <ellipse cx="405" cy="185" rx="15" ry="13" class="superficie-oclusal"/>
            <path d="M 394 175 Q 405 170 416 175" class="cuspide-anatomica"/>
            <path d="M 394 195 Q 405 200 416 195" class="cuspide-anatomica"/>
            <line x1="405" y1="173" x2="405" y2="197" class="fisura-oclusal"/>
            <text x="405" y="185" class="numero-fdi">14</text>
        </g>
        
        <!-- Diente 13 - Canino Superior -->
        <g class="diente-correcto canino" id="diente-13">
            <path d="M 435 185 Q 445 165 455 185 Q 453 200 445 205 Q 437 200 435 185 Z" class="superficie-oclusal"/>
            <path d="M 441 180 Q 445 170 449 180" class="cuspide-anatomica"/>
            <text x="445" y="185" class="numero-fdi">13</text>
        </g>
        
        <!-- Diente 12 - Incisivo Lateral Superior -->
        <g class="diente-correcto incisivo-lateral" id="diente-12">
            <rect x="475" y="180" width="14" height="12" rx="2" class="superficie-oclusal"/>
            <line x1="477" y1="186" x2="487" y2="186" class="fisura-oclusal"/>
            <text x="482" y="186" class="numero-fdi">12</text>
        </g>
        
        <!-- Diente 11 - Incisivo Central Superior -->
        <g class="diente-correcto incisivo-central" id="diente-11">
            <rect x="505" y="178" width="16" height="14" rx="2" class="superficie-oclusal"/>
            <line x1="507" y1="185" x2="519" y2="185" class="fisura-oclusal"/>
            <text x="513" y="185" class="numero-fdi">11</text>
        </g>
        
        <!-- CUADRANTE SUPERIOR IZQUIERDO (21-28) - Simétrico -->
        
        <!-- Diente 21 - Incisivo Central Superior -->
        <g class="diente-correcto incisivo-central" id="diente-21">
            <rect x="679" y="178" width="16" height="14" rx="2" class="superficie-oclusal"/>
            <line x1="681" y1="185" x2="693" y2="185" class="fisura-oclusal"/>
            <text x="687" y="185" class="numero-fdi">21</text>
        </g>
        
        <!-- Diente 22 - Incisivo Lateral Superior -->
        <g class="diente-correcto incisivo-lateral" id="diente-22">
            <rect x="711" y="180" width="14" height="12" rx="2" class="superficie-oclusal"/>
            <line x1="713" y1="186" x2="723" y2="186" class="fisura-oclusal"/>
            <text x="718" y="186" class="numero-fdi">22</text>
        </g>
        
        <!-- Diente 23 - Canino Superior -->
        <g class="diente-correcto canino" id="diente-23">
            <path d="M 745 185 Q 755 165 765 185 Q 763 200 755 205 Q 747 200 745 185 Z" class="superficie-oclusal"/>
            <path d="M 751 180 Q 755 170 759 180" class="cuspide-anatomica"/>
            <text x="755" y="185" class="numero-fdi">23</text>
        </g>
        
        <!-- Diente 24 - Primer Premolar Superior -->
        <g class="diente-correcto premolar" id="diente-24">
            <ellipse cx="795" cy="185" rx="15" ry="13" class="superficie-oclusal"/>
            <path d="M 784 175 Q 795 170 806 175" class="cuspide-anatomica"/>
            <path d="M 784 195 Q 795 200 806 195" class="cuspide-anatomica"/>
            <line x1="795" y1="173" x2="795" y2="197" class="fisura-oclusal"/>
            <text x="795" y="185" class="numero-fdi">24</text>
        </g>
        
        <!-- Diente 25 - Segundo Premolar Superior -->
        <g class="diente-correcto premolar" id="diente-25">
            <ellipse cx="830" cy="190" rx="16" ry="14" class="superficie-oclusal"/>
            <path d="M 818 182 Q 830 177 842 182" class="cuspide-anatomica"/>
            <path d="M 818 198 Q 830 203 842 198" class="cuspide-anatomica"/>
            <line x1="830" y1="179" x2="830" y2="201" class="fisura-oclusal"/>
            <text x="830" y="190" class="numero-fdi">25</text>
        </g>
        
        <!-- Diente 26 - Primer Molar Superior -->
        <g class="diente-correcto molar" id="diente-26">
            <ellipse cx="880" cy="200" rx="24" ry="22" class="superficie-oclusal"/>
            <path d="M 861 188 Q 866 183 871 188 Q 880 183 889 188 Q 894 183 899 188" class="cuspide-anatomica"/>
            <path d="M 861 200 Q 866 195 871 200 Q 880 195 889 200 Q 894 195 899 200" class="cuspide-anatomica"/>
            <path d="M 861 212 Q 866 207 871 212 Q 880 207 889 212 Q 894 207 899 212" class="cuspide-anatomica"/>
            <line x1="866" y1="186" x2="866" y2="214" class="fisura-oclusal"/>
            <line x1="880" y1="186" x2="880" y2="214" class="fisura-oclusal"/>
            <line x1="894" y1="186" x2="894" y2="214" class="fisura-oclusal"/>
            <text x="880" y="200" class="numero-fdi">26</text>
        </g>
        
        <!-- Diente 27 - Segundo Molar Superior -->
        <g class="diente-correcto molar" id="diente-27">
            <ellipse cx="930" cy="215" rx="22" ry="20" class="superficie-oclusal"/>
            <path d="M 913 205 Q 918 200 923 205 Q 930 200 937 205 Q 942 200 947 205" class="cuspide-anatomica"/>
            <path d="M 913 215 Q 918 210 923 215 Q 930 210 937 215 Q 942 210 947 215" class="cuspide-anatomica"/>
            <path d="M 913 225 Q 918 220 923 225 Q 930 220 937 225 Q 942 220 947 225" class="cuspide-anatomica"/>
            <line x1="918" y1="203" x2="918" y2="227" class="fisura-oclusal"/>
            <line x1="930" y1="203" x2="930" y2="227" class="fisura-oclusal"/>
            <line x1="942" y1="203" x2="942" y2="227" class="fisura-oclusal"/>
            <text x="930" y="215" class="numero-fdi">27</text>
        </g>
        
        <!-- Diente 28 - Tercer Molar Superior -->
        <g class="diente-correcto molar" id="diente-28">
            <ellipse cx="975" cy="230" rx="20" ry="18" class="superficie-oclusal"/>
            <path d="M 960 220 Q 965 215 970 220 Q 975 215 980 220 Q 985 215 990 220" class="cuspide-anatomica"/>
            <path d="M 960 230 Q 965 225 970 230 Q 975 225 980 230 Q 985 225 990 230" class="cuspide-anatomica"/>
            <path d="M 960 240 Q 965 235 970 240 Q 975 235 980 240 Q 985 235 990 240" class="cuspide-anatomica"/>
            <line x1="965" y1="218" x2="965" y2="242" class="fisura-oclusal"/>
            <line x1="975" y1="218" x2="975" y2="242" class="fisura-oclusal"/>
            <line x1="985" y1="218" x2="985" y2="242" class="fisura-oclusal"/>
            <text x="975" y="230" class="numero-fdi">28</text>
        </g>
        
        <!-- ==================== DIENTES INFERIORES (ARCADA MÁS ESTRECHA) ==================== -->
        
        <!-- CUADRANTE INFERIOR DERECHO (48-41) -->
        
        <!-- Diente 48 - Tercer Molar Inferior (Ligeramente más pequeño) -->
        <g class="diente-correcto molar" id="diente-48">
            <ellipse cx="255" cy="570" rx="19" ry="17" class="superficie-oclusal"/>
            <path d="M 242 562 Q 246 558 250 562 Q 255 558 260 562 Q 264 558 268 562" class="cuspide-anatomica"/>
            <path d="M 242 570 Q 246 566 250 570 Q 255 566 260 570 Q 264 566 268 570" class="cuspide-anatomica"/>
            <path d="M 242 578 Q 246 574 250 578 Q 255 574 260 578 Q 264 574 268 578" class="cuspide-anatomica"/>
            <line x1="246" y1="560" x2="246" y2="580" class="fisura-oclusal"/>
            <line x1="255" y1="560" x2="255" y2="580" class="fisura-oclusal"/>
            <line x1="264" y1="560" x2="264" y2="580" class="fisura-oclusal"/>
            <text x="255" y="570" class="numero-fdi">48</text>
        </g>
        
        <!-- Diente 47 - Segundo Molar Inferior -->
        <g class="diente-correcto molar" id="diente-47">
            <ellipse cx="295" cy="555" rx="21" ry="19" class="superficie-oclusal"/>
            <path d="M 279 545 Q 284 541 289 545 Q 295 541 301 545 Q 306 541 311 545" class="cuspide-anatomica"/>
            <path d="M 279 555 Q 284 551 289 555 Q 295 551 301 555 Q 306 551 311 555" class="cuspide-anatomica"/>
            <path d="M 279 565 Q 284 561 289 565 Q 295 561 301 565 Q 306 561 311 565" class="cuspide-anatomica"/>
            <line x1="284" y1="543" x2="284" y2="567" class="fisura-oclusal"/>
            <line x1="295" y1="543" x2="295" y2="567" class="fisura-oclusal"/>
            <line x1="306" y1="543" x2="306" y2="567" class="fisura-oclusal"/>
            <text x="295" y="555" class="numero-fdi">47</text>
        </g>
        
        <!-- Diente 46 - Primer Molar Inferior (Más grande) -->
        <g class="diente-correcto molar" id="diente-46">
            <ellipse cx="340" cy="540" rx="23" ry="21" class="superficie-oclusal"/>
            <path d="M 322 528 Q 327 524 332 528 Q 340 524 348 528 Q 353 524 358 528" class="cuspide-anatomica"/>
            <path d="M 322 540 Q 327 536 332 540 Q 340 536 348 540 Q 353 536 358 540" class="cuspide-anatomica"/>
            <path d="M 322 552 Q 327 548 332 552 Q 340 548 348 552 Q 353 548 358 552" class="cuspide-anatomica"/>
            <line x1="327" y1="526" x2="327" y2="554" class="fisura-oclusal"/>
            <line x1="340" y1="526" x2="340" y2="554" class="fisura-oclusal"/>
            <line x1="353" y1="526" x2="353" y2="554" class="fisura-oclusal"/>
            <text x="340" y="540" class="numero-fdi">46</text>
        </g>
        
        <!-- Diente 45 - Segundo Premolar Inferior -->
        <g class="diente-correcto premolar" id="diente-45">
            <ellipse cx="385" cy="530" rx="15" ry="13" class="superficie-oclusal"/>
            <path d="M 374 522 Q 385 517 396 522" class="cuspide-anatomica"/>
            <path d="M 374 538 Q 385 543 396 538" class="cuspide-anatomica"/>
            <line x1="385" y1="519" x2="385" y2="541" class="fisura-oclusal"/>
            <text x="385" y="530" class="numero-fdi">45</text>
        </g>
        
        <!-- Diente 44 - Primer Premolar Inferior -->
        <g class="diente-correcto premolar" id="diente-44">
            <ellipse cx="415" cy="525" rx="14" ry="12" class="superficie-oclusal"/>
            <path d="M 405 515 Q 415 510 425 515" class="cuspide-anatomica"/>
            <path d="M 405 535 Q 415 540 425 535" class="cuspide-anatomica"/>
            <line x1="415" y1="513" x2="415" y2="537" class="fisura-oclusal"/>
            <text x="415" y="525" class="numero-fdi">44</text>
        </g>
        
        <!-- Diente 43 - Canino Inferior -->
        <g class="diente-correcto canino" id="diente-43">
            <path d="M 440 525 Q 450 505 460 525 Q 458 540 450 545 Q 442 540 440 525 Z" class="superficie-oclusal"/>
            <path d="M 446 520 Q 450 510 454 520" class="cuspide-anatomica"/>
            <text x="450" y="525" class="numero-fdi">43</text>
        </g>
        
        <!-- Diente 42 - Incisivo Lateral Inferior -->
        <g class="diente-correcto incisivo-lateral" id="diente-42">
            <rect x="475" y="520" width="13" height="11" rx="2" class="superficie-oclusal"/>
            <line x1="477" y1="525" x2="486" y2="525" class="fisura-oclusal"/>
            <text x="481" y="525" class="numero-fdi">42</text>
        </g>
        
        <!-- Diente 41 - Incisivo Central Inferior -->
        <g class="diente-correcto incisivo-central" id="diente-41">
            <rect x="505" y="518" width="15" height="13" rx="2" class="superficie-oclusal"/>
            <line x1="507" y1="524" x2="518" y2="524" class="fisura-oclusal"/>
            <text x="512" y="524" class="numero-fdi">41</text>
        </g>
        
        <!-- CUADRANTE INFERIOR IZQUIERDO (31-38) - Simétrico -->
        
        <!-- Diente 31 - Incisivo Central Inferior -->
        <g class="diente-correcto incisivo-central" id="diente-31">
            <rect x="680" y="518" width="15" height="13" rx="2" class="superficie-oclusal"/>
            <line x1="682" y1="524" x2="693" y2="524" class="fisura-oclusal"/>
            <text x="687" y="524" class="numero-fdi">31</text>
        </g>
        
        <!-- Diente 32 - Incisivo Lateral Inferior -->
        <g class="diente-correcto incisivo-lateral" id="diente-32">
            <rect x="712" y="520" width="13" height="11" rx="2" class="superficie-oclusal"/>
            <line x1="714" y1="525" x2="723" y2="525" class="fisura-oclusal"/>
            <text x="718" y="525" class="numero-fdi">32</text>
        </g>
        
        <!-- Diente 33 - Canino Inferior -->
        <g class="diente-correcto canino" id="diente-33">
            <path d="M 740 525 Q 750 505 760 525 Q 758 540 750 545 Q 742 540 740 525 Z" class="superficie-oclusal"/>
            <path d="M 746 520 Q 750 510 754 520" class="cuspide-anatomica"/>
            <text x="750" y="525" class="numero-fdi">33</text>
        </g>
        
        <!-- Diente 34 - Primer Premolar Inferior -->
        <g class="diente-correcto premolar" id="diente-34">
            <ellipse cx="785" cy="525" rx="14" ry="12" class="superficie-oclusal"/>
            <path d="M 775 515 Q 785 510 795 515" class="cuspide-anatomica"/>
            <path d="M 775 535 Q 785 540 795 535" class="cuspide-anatomica"/>
            <line x1="785" y1="513" x2="785" y2="537" class="fisura-oclusal"/>
            <text x="785" y="525" class="numero-fdi">34</text>
        </g>
        
        <!-- Diente 35 - Segundo Premolar Inferior -->
        <g class="diente-correcto premolar" id="diente-35">
            <ellipse cx="815" cy="530" rx="15" ry="13" class="superficie-oclusal"/>
            <path d="M 804 522 Q 815 517 826 522" class="cuspide-anatomica"/>
            <path d="M 804 538 Q 815 543 826 538" class="cuspide-anatomica"/>
            <line x1="815" y1="519" x2="815" y2="541" class="fisura-oclusal"/>
            <text x="815" y="530" class="numero-fdi">35</text>
        </g>
        
        <!-- Diente 36 - Primer Molar Inferior -->
        <g class="diente-correcto molar" id="diente-36">
            <ellipse cx="860" cy="540" rx="23" ry="21" class="superficie-oclusal"/>
            <path d="M 842 528 Q 847 524 852 528 Q 860 524 868 528 Q 873 524 878 528" class="cuspide-anatomica"/>
            <path d="M 842 540 Q 847 536 852 540 Q 860 536 868 540 Q 873 536 878 540" class="cuspide-anatomica"/>
            <path d="M 842 552 Q 847 548 852 552 Q 860 548 868 552 Q 873 548 878 552" class="cuspide-anatomica"/>
            <line x1="847" y1="526" x2="847" y2="554" class="fisura-oclusal"/>
            <line x1="860" y1="526" x2="860" y2="554" class="fisura-oclusal"/>
            <line x1="873" y1="526" x2="873" y2="554" class="fisura-oclusal"/>
            <text x="860" y="540" class="numero-fdi">36</text>
        </g>
        
        <!-- Diente 37 - Segundo Molar Inferior -->
        <g class="diente-correcto molar" id="diente-37">
            <ellipse cx="905" cy="555" rx="21" ry="19" class="superficie-oclusal"/>
            <path d="M 889 545 Q 894 541 899 545 Q 905 541 911 545 Q 916 541 921 545" class="cuspide-anatomica"/>
            <path d="M 889 555 Q 894 551 899 555 Q 905 551 911 555 Q 916 551 921 555" class="cuspide-anatomica"/>
            <path d="M 889 565 Q 894 561 899 565 Q 905 561 911 565 Q 916 561 921 565" class="cuspide-anatomica"/>
            <line x1="894" y1="543" x2="894" y2="567" class="fisura-oclusal"/>
            <line x1="905" y1="543" x2="905" y2="567" class="fisura-oclusal"/>
            <line x1="916" y1="543" x2="916" y2="567" class="fisura-oclusal"/>
            <text x="905" y="555" class="numero-fdi">37</text>
        </g>
        
        <!-- Diente 38 - Tercer Molar Inferior -->
        <g class="diente-correcto molar" id="diente-38">
            <ellipse cx="945" cy="570" rx="19" ry="17" class="superficie-oclusal"/>
            <path d="M 932 562 Q 936 558 940 562 Q 945 558 950 562 Q 954 558 958 562" class="cuspide-anatomica"/>
            <path d="M 932 570 Q 936 566 940 570 Q 945 566 950 570 Q 954 566 958 570" class="cuspide-anatomica"/>
            <path d="M 932 578 Q 936 574 940 578 Q 945 574 950 578 Q 954 574 958 578" class="cuspide-anatomica"/>
            <line x1="936" y1="560" x2="936" y2="580" class="fisura-oclusal"/>
            <line x1="945" y1="560" x2="945" y2="580" class="fisura-oclusal"/>
            <line x1="954" y1="560" x2="954" y2="580" class="fisura-oclusal"/>
            <text x="945" y="570" class="numero-fdi">38</text>
        </g>
        
    </svg>
</div>

<script>
(function() {
    'use strict';
    
    function log(mensaje) {
        console.log(`[ODONTOGRAMA ANATÓMICO CORRECTO] ${mensaje}`);
    }
    
    document.addEventListener('DOMContentLoaded', function() {
        log('Iniciando odontograma anatómico correcto con arcadas en semielipse');
        
        const dientes = document.querySelectorAll('.diente-correcto');
        log(`Configurando ${dientes.length} dientes con morfología dental realista`);
        
        dientes.forEach(function(diente, index) {
            const dienteId = diente.id;
            const numeroFDI = dienteId.replace('diente-', '');
            const cuadrante = Math.floor(numeroFDI / 10);
            const posicion = numeroFDI % 10;
            
            // Determinar tipo y morfología dental
            let tipoDiente = '';
            let morfologia = '';
            if (posicion === 1) {
                tipoDiente = 'Incisivo Central';
                morfologia = 'Cincelado aplanado mediano';
            } else if (posicion === 2) {
                tipoDiente = 'Incisivo Lateral';
                morfologia = 'Cincelado aplanado pequeño';
            } else if (posicion === 3) {
                tipoDiente = 'Canino';
                morfologia = 'Triangular puntiagudo';
            } else if (posicion === 4 || posicion === 5) {
                tipoDiente = posicion === 4 ? 'Primer Premolar' : 'Segundo Premolar';
                morfologia = 'Ovalado con cúspides, tamaño mediano';
            } else if (posicion === 6 || posicion === 7 || posicion === 8) {
                tipoDiente = posicion === 6 ? 'Primer Molar' : posicion === 7 ? 'Segundo Molar' : 'Tercer Molar';
                morfologia = 'Cuadrado/redondeado, mayor volumen';
            }
            
            diente.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                log(`Diente seleccionado: FDI ${numeroFDI} (${tipoDiente}) - ${morfologia}`);
                
                // Remover selección anterior
                document.querySelectorAll('.diente-correcto').forEach(d => {
                    d.classList.remove('selected');
                });
                
                // Seleccionar diente actual
                diente.classList.add('selected');
                
                // Disparar evento personalizado
                const eventoSeleccion = new CustomEvent('dienteAnatomico​CorrectoSeleccionado', {
                    detail: {
                        numeroFDI: numeroFDI,
                        cuadrante: cuadrante,
                        posicion: posicion,
                        tipoDiente: tipoDiente,
                        morfologia: morfologia,
                        elemento: diente
                    }
                });
                
                document.dispatchEvent(eventoSeleccion);
            });
            
            diente.addEventListener('mouseenter', function() {
                log(`Hover: Diente FDI ${numeroFDI} (${tipoDiente}) - ${morfologia}`);
            });
        });
        
        log('Odontograma anatómico correcto inicializado - Arcadas en semielipse con contacto interproximal');
    });
    
    // Función global para aplicar diagnósticos
    window.aplicarDiagnosticoCorrect = function(numeroFDI, diagnostico) {
        const diente = document.getElementById(`diente-${numeroFDI}`);
        if (diente) {
            // Remover diagnósticos anteriores
            diente.classList.remove('sano', 'caries', 'obturada', 'corona', 'extraida', 'implante', 'endodoncia');
            
            // Aplicar nuevo diagnóstico
            if (diagnostico) {
                diente.classList.add(diagnostico);
                log(`Diagnóstico aplicado: Diente ${numeroFDI} - ${diagnostico}`);
            }
        }
    };
    
    // Función global para limpiar selecciones
    window.limpiarSeleccionCorrect = function() {
        document.querySelectorAll('.diente-correcto').forEach(diente => {
            diente.classList.remove('selected', 'sano', 'caries', 'obturada', 'corona', 'extraida', 'implante', 'endodoncia');
        });
        log('Selección y diagnósticos limpiados');
    };
    
})();
</script>