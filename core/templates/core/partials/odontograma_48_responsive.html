{% load math_filters %}
<div id="odontograma-container" class="odontograma-responsive">
    <!-- Controles de navegación para dispositivos pequeños/medianos -->
    <div class="odontograma-controls d-lg-none mb-3">
        <div class="btn-group" role="group" aria-label="Navegación de cuadrantes">
            <button type="button" class="btn btn-outline-primary btn-sm" data-cuadrante="all" id="btn-vista-completa">
                <i class="fas fa-expand"></i> Vista Completa
            </button>
            <button type="button" class="btn btn-outline-secondary btn-sm" data-cuadrante="1">
                <i class="fas fa-square"></i> Cuad. I
            </button>
            <button type="button" class="btn btn-outline-secondary btn-sm" data-cuadrante="2">
                <i class="fas fa-square"></i> Cuad. II  
            </button>
            <button type="button" class="btn btn-outline-secondary btn-sm" data-cuadrante="3">
                <i class="fas fa-square"></i> Cuad. III
            </button>
            <button type="button" class="btn btn-outline-secondary btn-sm" data-cuadrante="4">
                <i class="fas fa-square"></i> Cuad. IV
            </button>
        </div>
    </div>

    <!-- SVG Principal - Responsive -->
    <svg id="odontograma-48-svg" 
         class="odontograma-svg" 
         viewBox="0 0 1200 600" 
         xmlns="http://www.w3.org/2000/svg"
         preserveAspectRatio="xMidYMid meet">
        
        <!-- Estilos CSS integrados -->
        <defs>
            <style>
                /* Estilos base para todos los dientes */
                .diente { 
                    cursor: pointer; 
                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                }
                .diente:hover { 
                    transform: scale(1.15);
                    filter: drop-shadow(3px 3px 8px rgba(0,0,0,0.4));
                }
                .diente path { 
                    fill: #ffffff; 
                    stroke: #6c757d; 
                    stroke-width: 1.8; 
                    transition: all 0.2s ease;
                }
                .diente.diagnosticado path {
                    stroke-width: 2.8;
                }
                .numero-diente { 
                    font-size: 12px; 
                    font-weight: 700; 
                    fill: #495057; 
                    text-anchor: middle; 
                    pointer-events: none; 
                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                }
                
                /* Líneas divisorias */
                .separador {
                    stroke: #adb5bd;
                    stroke-width: 2;
                    opacity: 0.6;
                }
                
                /* Etiquetas de cuadrantes */
                .cuadrante-label {
                    font-size: 24px;
                    font-weight: bold;
                    fill: #6c757d;
                    text-anchor: middle;
                    opacity: 0.8;
                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                }
                
                /* Supernumerarios con estilo diferenciado */
                .supernumerario path {
                    stroke: #fd7e14;
                    stroke-dasharray: 3,2;
                    opacity: 0.9;
                }
                .supernumerario .numero-diente {
                    fill: #fd7e14;
                    font-size: 10px;
                }
                
                /* Estados de diagnóstico */
                .sano path { fill: #d4edda; stroke: #28a745; }
                .caries path { fill: #f8d7da; stroke: #dc3545; }
                .obturada path { fill: #fff3cd; stroke: #ffc107; }
                .corona path { fill: #cce5f7; stroke: #007bff; }
                .extraida path { 
                    fill: #f1f3f4; 
                    stroke: #6c757d; 
                    stroke-dasharray: 5,5; 
                    opacity: 0.7;
                }
                .implante path { 
                    fill: #e2e3e5; 
                    stroke: #495057; 
                    stroke-width: 3;
                }
                
                /* Responsividad por cuadrantes */
                .cuadrante {
                    transition: opacity 0.3s ease, transform 0.3s ease;
                }
                .cuadrante.hidden {
                    opacity: 0.1;
                    pointer-events: none;
                }
                .cuadrante.focused {
                    transform: scale(1.2);
                    transform-origin: center;
                }
                
                /* Media queries dentro del SVG */
                @media (max-width: 768px) {
                    .numero-diente { font-size: 10px; }
                    .cuadrante-label { font-size: 20px; }
                    .diente:hover { transform: scale(1.3); }
                }
                
                @media (max-width: 576px) {
                    .numero-diente { font-size: 8px; }
                    .cuadrante-label { font-size: 16px; }
                    .supernumerario .numero-diente { font-size: 7px; }
                }
            </style>
            
            <!-- Iconos para diagnósticos -->
            <g id="icono-caries">
                <circle cx="0" cy="0" r="5" fill="#dc3545"/>
                <path d="M-3,-3 L3,3 M-3,3 L3,-3" stroke="white" stroke-width="1.5"/>
            </g>
            
            <g id="icono-corona">
                <polygon points="0,-5 2,-2 5,-3 5,2 2,3 0,5 -2,3 -5,2 -5,-3 -2,-2" fill="#ffc107" stroke="#e69500" stroke-width="0.5"/>
            </g>
            
            <g id="icono-implante">
                <rect x="-2" y="-5" width="4" height="10" rx="1" fill="#6c757d"/>
                <circle cx="0" cy="2" r="1.5" fill="#495057"/>
            </g>
            
            <g id="icono-endodoncia">
                <circle cx="0" cy="0" r="4" fill="none" stroke="#e83e8c" stroke-width="1"/>
                <circle cx="0" cy="0" r="2" fill="#e83e8c"/>
            </g>
        </defs>

        <!-- Fondo con gradiente -->
        <rect width="100%" height="100%" fill="url(#gradientBg)"/>
        <defs>
            <linearGradient id="gradientBg" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#f8f9fa;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#e9ecef;stop-opacity:1" />
            </linearGradient>
        </defs>

        <!-- Líneas divisorias centrales -->
        <line x1="600" y1="80" x2="600" y2="520" class="separador"/>
        <line x1="150" y1="300" x2="1050" y2="300" class="separador"/>
        
        <!-- Etiquetas de cuadrantes -->
        <text x="375" y="120" class="cuadrante-label">I</text>
        <text x="825" y="120" class="cuadrante-label">II</text>
        <text x="375" y="500" class="cuadrante-label">IV</text>
        <text x="825" y="500" class="cuadrante-label">III</text>

        <!-- CUADRANTE I (Superior Derecho) - Dientes 11-18 + supernumerarios -->
        <g id="cuadrante-1" class="cuadrante">
            <!-- Supernumerarios distales -->
            <g class="diente supernumerario" id="diente-19" transform="translate(150, 160)">
                <path d="M-10,-12 C-10,-15 -8,-17 -5,-17 C-2,-17 2,-17 5,-17 C8,-17 10,-15 10,-12 V6 C10,9 8,12 5,12 L-5,12 C-8,12 -10,9 -10,6 Z"/>
                <text class="numero-diente" x="0" y="2">19</text>
                <g class="icono-container"></g>
            </g>
            
            <g class="diente supernumerario" id="diente-110" transform="translate(190, 165)">
                <path d="M-8,-10 C-8,-12 -6,-14 -4,-14 C-2,-14 2,-14 4,-14 C6,-14 8,-12 8,-10 V4 C8,7 6,10 4,10 L-4,10 C-6,10 -8,7 -8,4 Z"/>
                <text class="numero-diente" x="0" y="1">110</text>
                <g class="icono-container"></g>
            </g>

            <!-- Terceros molares -->
            <g class="diente" id="diente-18" transform="translate(230, 170)">
                <path d="M-14,-16 C-14,-20 -11,-23 -7,-23 C-3,-23 3,-23 7,-23 C11,-23 14,-20 14,-16 V8 C14,13 11,16 7,16 L-7,16 C-11,16 -14,13 -14,8 Z"/>
                <text class="numero-diente" x="0" y="3">18</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Segundos molares -->
            <g class="diente" id="diente-17" transform="translate(290, 180)">
                <path d="M-14,-16 C-14,-20 -11,-23 -7,-23 C-3,-23 3,-23 7,-23 C11,-23 14,-20 14,-16 V8 C14,13 11,16 7,16 L-7,16 C-11,16 -14,13 -14,8 Z"/>
                <text class="numero-diente" x="0" y="3">17</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Primeros molares -->
            <g class="diente" id="diente-16" transform="translate(350, 190)">
                <path d="M-14,-16 C-14,-20 -11,-23 -7,-23 C-3,-23 3,-23 7,-23 C11,-23 14,-20 14,-16 V8 C14,13 11,16 7,16 L-7,16 C-11,16 -14,13 -14,8 Z"/>
                <text class="numero-diente" x="0" y="3">16</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Segundos premolares -->
            <g class="diente" id="diente-15" transform="translate(410, 200)">
                <path d="M-11,-13 C-11,-16 -9,-18 -6,-18 C-3,-18 3,-18 6,-18 C9,-18 11,-16 11,-13 V6 C11,10 9,13 6,13 L-6,13 C-9,13 -11,10 -11,6 Z"/>
                <text class="numero-diente" x="0" y="2">15</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Primeros premolares -->
            <g class="diente" id="diente-14" transform="translate(460, 210)">
                <path d="M-11,-13 C-11,-16 -9,-18 -6,-18 C-3,-18 3,-18 6,-18 C9,-18 11,-16 11,-13 V6 C11,10 9,13 6,13 L-6,13 C-9,13 -11,10 -11,6 Z"/>
                <text class="numero-diente" x="0" y="2">14</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Caninos -->
            <g class="diente" id="diente-13" transform="translate(510, 220)">
                <path d="M-8,-11 C-8,-14 -6,-16 -3,-16 C0,-16 3,-16 3,-16 C6,-16 8,-14 8,-11 V4 C8,7 6,11 3,11 L-3,11 C-6,11 -8,7 -8,4 Z"/>
                <text class="numero-diente" x="0" y="1">13</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Incisivos laterales -->
            <g class="diente" id="diente-12" transform="translate(550, 230)">
                <path d="M-6,-9 C-6,-12 -4,-14 -2,-14 C0,-14 2,-14 2,-14 C4,-14 6,-12 6,-9 V2 C6,5 4,9 2,9 L-2,9 C-4,9 -6,5 -6,2 Z"/>
                <text class="numero-diente" x="0" y="0">12</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Incisivos centrales -->
            <g class="diente" id="diente-11" transform="translate(580, 240)">
                <path d="M-6,-9 C-6,-12 -4,-14 -2,-14 C0,-14 2,-14 2,-14 C4,-14 6,-12 6,-9 V2 C6,5 4,9 2,9 L-2,9 C-4,9 -6,5 -6,2 Z"/>
                <text class="numero-diente" x="0" y="0">11</text>
                <g class="icono-container"></g>
            </g>
        </g>

        <!-- CUADRANTE II (Superior Izquierdo) - Dientes 21-28 + supernumerarios -->
        <g id="cuadrante-2" class="cuadrante">
            <!-- Incisivos centrales -->
            <g class="diente" id="diente-21" transform="translate(620, 240)">
                <path d="M-6,-9 C-6,-12 -4,-14 -2,-14 C0,-14 2,-14 2,-14 C4,-14 6,-12 6,-9 V2 C6,5 4,9 2,9 L-2,9 C-4,9 -6,5 -6,2 Z"/>
                <text class="numero-diente" x="0" y="0">21</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Incisivos laterales -->
            <g class="diente" id="diente-22" transform="translate(650, 230)">
                <path d="M-6,-9 C-6,-12 -4,-14 -2,-14 C0,-14 2,-14 2,-14 C4,-14 6,-12 6,-9 V2 C6,5 4,9 2,9 L-2,9 C-4,9 -6,5 -6,2 Z"/>
                <text class="numero-diente" x="0" y="0">22</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Caninos -->
            <g class="diente" id="diente-23" transform="translate(690, 220)">
                <path d="M-8,-11 C-8,-14 -6,-16 -3,-16 C0,-16 3,-16 3,-16 C6,-16 8,-14 8,-11 V4 C8,7 6,11 3,11 L-3,11 C-6,11 -8,7 -8,4 Z"/>
                <text class="numero-diente" x="0" y="1">23</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Primeros premolares -->
            <g class="diente" id="diente-24" transform="translate(740, 210)">
                <path d="M-11,-13 C-11,-16 -9,-18 -6,-18 C-3,-18 3,-18 6,-18 C9,-18 11,-16 11,-13 V6 C11,10 9,13 6,13 L-6,13 C-9,13 -11,10 -11,6 Z"/>
                <text class="numero-diente" x="0" y="2">24</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Segundos premolares -->
            <g class="diente" id="diente-25" transform="translate(790, 200)">
                <path d="M-11,-13 C-11,-16 -9,-18 -6,-18 C-3,-18 3,-18 6,-18 C9,-18 11,-16 11,-13 V6 C11,10 9,13 6,13 L-6,13 C-9,13 -11,10 -11,6 Z"/>
                <text class="numero-diente" x="0" y="2">25</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Primeros molares -->
            <g class="diente" id="diente-26" transform="translate(850, 190)">
                <path d="M-14,-16 C-14,-20 -11,-23 -7,-23 C-3,-23 3,-23 7,-23 C11,-23 14,-20 14,-16 V8 C14,13 11,16 7,16 L-7,16 C-11,16 -14,13 -14,8 Z"/>
                <text class="numero-diente" x="0" y="3">26</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Segundos molares -->
            <g class="diente" id="diente-27" transform="translate(910, 180)">
                <path d="M-14,-16 C-14,-20 -11,-23 -7,-23 C-3,-23 3,-23 7,-23 C11,-23 14,-20 14,-16 V8 C14,13 11,16 7,16 L-7,16 C-11,16 -14,13 -14,8 Z"/>
                <text class="numero-diente" x="0" y="3">27</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Terceros molares -->
            <g class="diente" id="diente-28" transform="translate(970, 170)">
                <path d="M-14,-16 C-14,-20 -11,-23 -7,-23 C-3,-23 3,-23 7,-23 C11,-23 14,-20 14,-16 V8 C14,13 11,16 7,16 L-7,16 C-11,16 -14,13 -14,8 Z"/>
                <text class="numero-diente" x="0" y="3">28</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Supernumerarios distales -->
            <g class="diente supernumerario" id="diente-210" transform="translate(1010, 165)">
                <path d="M-8,-10 C-8,-12 -6,-14 -4,-14 C-2,-14 2,-14 4,-14 C6,-14 8,-12 8,-10 V4 C8,7 6,10 4,10 L-4,10 C-6,10 -8,7 -8,4 Z"/>
                <text class="numero-diente" x="0" y="1">210</text>
                <g class="icono-container"></g>
            </g>
            
            <g class="diente supernumerario" id="diente-29" transform="translate(1050, 160)">
                <path d="M-10,-12 C-10,-15 -8,-17 -5,-17 C-2,-17 2,-17 5,-17 C8,-17 10,-15 10,-12 V6 C10,9 8,12 5,12 L-5,12 C-8,12 -10,9 -10,6 Z"/>
                <text class="numero-diente" x="0" y="2">29</text>
                <g class="icono-container"></g>
            </g>
        </g>

        <!-- CUADRANTE III (Inferior Izquierdo) - Dientes 31-38 + supernumerarios -->
        <g id="cuadrante-3" class="cuadrante">
            <!-- Incisivos centrales (reflejados) -->
            <g class="diente" id="diente-31" transform="translate(620, 360) scale(1, -1)">
                <path d="M-6,-9 C-6,-12 -4,-14 -2,-14 C0,-14 2,-14 2,-14 C4,-14 6,-12 6,-9 V2 C6,5 4,9 2,9 L-2,9 C-4,9 -6,5 -6,2 Z"/>
                <text class="numero-diente" x="0" y="0" transform="scale(1, -1)">31</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Incisivos laterales (reflejados) -->
            <g class="diente" id="diente-32" transform="translate(650, 370) scale(1, -1)">
                <path d="M-6,-9 C-6,-12 -4,-14 -2,-14 C0,-14 2,-14 2,-14 C4,-14 6,-12 6,-9 V2 C6,5 4,9 2,9 L-2,9 C-4,9 -6,5 -6,2 Z"/>
                <text class="numero-diente" x="0" y="0" transform="scale(1, -1)">32</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Caninos (reflejados) -->
            <g class="diente" id="diente-33" transform="translate(690, 380) scale(1, -1)">
                <path d="M-8,-11 C-8,-14 -6,-16 -3,-16 C0,-16 3,-16 3,-16 C6,-16 8,-14 8,-11 V4 C8,7 6,11 3,11 L-3,11 C-6,11 -8,7 -8,4 Z"/>
                <text class="numero-diente" x="0" y="1" transform="scale(1, -1)">33</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Primeros premolares (reflejados) -->
            <g class="diente" id="diente-34" transform="translate(740, 390) scale(1, -1)">
                <path d="M-11,-13 C-11,-16 -9,-18 -6,-18 C-3,-18 3,-18 6,-18 C9,-18 11,-16 11,-13 V6 C11,10 9,13 6,13 L-6,13 C-9,13 -11,10 -11,6 Z"/>
                <text class="numero-diente" x="0" y="2" transform="scale(1, -1)">34</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Segundos premolares (reflejados) -->
            <g class="diente" id="diente-35" transform="translate(790, 400) scale(1, -1)">
                <path d="M-11,-13 C-11,-16 -9,-18 -6,-18 C-3,-18 3,-18 6,-18 C9,-18 11,-16 11,-13 V6 C11,10 9,13 6,13 L-6,13 C-9,13 -11,10 -11,6 Z"/>
                <text class="numero-diente" x="0" y="2" transform="scale(1, -1)">35</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Primeros molares (reflejados) -->
            <g class="diente" id="diente-36" transform="translate(850, 410) scale(1, -1)">
                <path d="M-14,-16 C-14,-20 -11,-23 -7,-23 C-3,-23 3,-23 7,-23 C11,-23 14,-20 14,-16 V8 C14,13 11,16 7,16 L-7,16 C-11,16 -14,13 -14,8 Z"/>
                <text class="numero-diente" x="0" y="3" transform="scale(1, -1)">36</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Segundos molares (reflejados) -->
            <g class="diente" id="diente-37" transform="translate(910, 420) scale(1, -1)">
                <path d="M-14,-16 C-14,-20 -11,-23 -7,-23 C-3,-23 3,-23 7,-23 C11,-23 14,-20 14,-16 V8 C14,13 11,16 7,16 L-7,16 C-11,16 -14,13 -14,8 Z"/>
                <text class="numero-diente" x="0" y="3" transform="scale(1, -1)">37</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Terceros molares (reflejados) -->
            <g class="diente" id="diente-38" transform="translate(970, 430) scale(1, -1)">
                <path d="M-14,-16 C-14,-20 -11,-23 -7,-23 C-3,-23 3,-23 7,-23 C11,-23 14,-20 14,-16 V8 C14,13 11,16 7,16 L-7,16 C-11,16 -14,13 -14,8 Z"/>
                <text class="numero-diente" x="0" y="3" transform="scale(1, -1)">38</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Supernumerarios distales (reflejados) -->
            <g class="diente supernumerario" id="diente-310" transform="translate(1010, 435) scale(1, -1)">
                <path d="M-8,-10 C-8,-12 -6,-14 -4,-14 C-2,-14 2,-14 4,-14 C6,-14 8,-12 8,-10 V4 C8,7 6,10 4,10 L-4,10 C-6,10 -8,7 -8,4 Z"/>
                <text class="numero-diente" x="0" y="1" transform="scale(1, -1)">310</text>
                <g class="icono-container"></g>
            </g>
            
            <g class="diente supernumerario" id="diente-39" transform="translate(1050, 440) scale(1, -1)">
                <path d="M-10,-12 C-10,-15 -8,-17 -5,-17 C-2,-17 2,-17 5,-17 C8,-17 10,-15 10,-12 V6 C10,9 8,12 5,12 L-5,12 C-8,12 -10,9 -10,6 Z"/>
                <text class="numero-diente" x="0" y="2" transform="scale(1, -1)">39</text>
                <g class="icono-container"></g>
            </g>
        </g>

        <!-- CUADRANTE IV (Inferior Derecho) - Dientes 41-48 + supernumerarios -->
        <g id="cuadrante-4" class="cuadrante">
            <!-- Supernumerarios distales (reflejados) -->
            <g class="diente supernumerario" id="diente-49" transform="translate(150, 440) scale(1, -1)">
                <path d="M-10,-12 C-10,-15 -8,-17 -5,-17 C-2,-17 2,-17 5,-17 C8,-17 10,-15 10,-12 V6 C10,9 8,12 5,12 L-5,12 C-8,12 -10,9 -10,6 Z"/>
                <text class="numero-diente" x="0" y="2" transform="scale(1, -1)">49</text>
                <g class="icono-container"></g>
            </g>
            
            <g class="diente supernumerario" id="diente-410" transform="translate(190, 435) scale(1, -1)">
                <path d="M-8,-10 C-8,-12 -6,-14 -4,-14 C-2,-14 2,-14 4,-14 C6,-14 8,-12 8,-10 V4 C8,7 6,10 4,10 L-4,10 C-6,10 -8,7 -8,4 Z"/>
                <text class="numero-diente" x="0" y="1" transform="scale(1, -1)">410</text>
                <g class="icono-container"></g>
            </g>

            <!-- Terceros molares (reflejados) -->
            <g class="diente" id="diente-48" transform="translate(230, 430) scale(1, -1)">
                <path d="M-14,-16 C-14,-20 -11,-23 -7,-23 C-3,-23 3,-23 7,-23 C11,-23 14,-20 14,-16 V8 C14,13 11,16 7,16 L-7,16 C-11,16 -14,13 -14,8 Z"/>
                <text class="numero-diente" x="0" y="3" transform="scale(1, -1)">48</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Segundos molares (reflejados) -->
            <g class="diente" id="diente-47" transform="translate(290, 420) scale(1, -1)">
                <path d="M-14,-16 C-14,-20 -11,-23 -7,-23 C-3,-23 3,-23 7,-23 C11,-23 14,-20 14,-16 V8 C14,13 11,16 7,16 L-7,16 C-11,16 -14,13 -14,8 Z"/>
                <text class="numero-diente" x="0" y="3" transform="scale(1, -1)">47</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Primeros molares (reflejados) -->
            <g class="diente" id="diente-46" transform="translate(350, 410) scale(1, -1)">
                <path d="M-14,-16 C-14,-20 -11,-23 -7,-23 C-3,-23 3,-23 7,-23 C11,-23 14,-20 14,-16 V8 C14,13 11,16 7,16 L-7,16 C-11,16 -14,13 -14,8 Z"/>
                <text class="numero-diente" x="0" y="3" transform="scale(1, -1)">46</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Segundos premolares (reflejados) -->
            <g class="diente" id="diente-45" transform="translate(410, 400) scale(1, -1)">
                <path d="M-11,-13 C-11,-16 -9,-18 -6,-18 C-3,-18 3,-18 6,-18 C9,-18 11,-16 11,-13 V6 C11,10 9,13 6,13 L-6,13 C-9,13 -11,10 -11,6 Z"/>
                <text class="numero-diente" x="0" y="2" transform="scale(1, -1)">45</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Primeros premolares (reflejados) -->
            <g class="diente" id="diente-44" transform="translate(460, 390) scale(1, -1)">
                <path d="M-11,-13 C-11,-16 -9,-18 -6,-18 C-3,-18 3,-18 6,-18 C9,-18 11,-16 11,-13 V6 C11,10 9,13 6,13 L-6,13 C-9,13 -11,10 -11,6 Z"/>
                <text class="numero-diente" x="0" y="2" transform="scale(1, -1)">44</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Caninos (reflejados) -->
            <g class="diente" id="diente-43" transform="translate(510, 380) scale(1, -1)">
                <path d="M-8,-11 C-8,-14 -6,-16 -3,-16 C0,-16 3,-16 3,-16 C6,-16 8,-14 8,-11 V4 C8,7 6,11 3,11 L-3,11 C-6,11 -8,7 -8,4 Z"/>
                <text class="numero-diente" x="0" y="1" transform="scale(1, -1)">43</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Incisivos laterales (reflejados) -->
            <g class="diente" id="diente-42" transform="translate(550, 370) scale(1, -1)">
                <path d="M-6,-9 C-6,-12 -4,-14 -2,-14 C0,-14 2,-14 2,-14 C4,-14 6,-12 6,-9 V2 C6,5 4,9 2,9 L-2,9 C-4,9 -6,5 -6,2 Z"/>
                <text class="numero-diente" x="0" y="0" transform="scale(1, -1)">42</text>
                <g class="icono-container"></g>
            </g>
            
            <!-- Incisivos centrales (reflejados) -->
            <g class="diente" id="diente-41" transform="translate(580, 360) scale(1, -1)">
                <path d="M-6,-9 C-6,-12 -4,-14 -2,-14 C0,-14 2,-14 2,-14 C4,-14 6,-12 6,-9 V2 C6,5 4,9 2,9 L-2,9 C-4,9 -6,5 -6,2 Z"/>
                <text class="numero-diente" x="0" y="0" transform="scale(1, -1)">41</text>
                <g class="icono-container"></g>
            </g>
        </g>

        <!-- Leyenda informativa -->
        <g id="leyenda" class="d-none d-lg-block">
            <rect x="50" y="540" width="300" height="40" fill="rgba(255,255,255,0.95)" stroke="#dee2e6" rx="6"/>
            <text x="60" y="555" font-size="11" fill="#6c757d" font-weight="600">48 Dientes Completos</text>
            <text x="60" y="570" font-size="10" fill="#6c757d">Supernumerarios: 19,29,39,49,110,210,310,410</text>
        </g>
    </svg>

    <!-- Información adicional para dispositivos pequeños -->
    <div class="odontograma-info d-lg-none mt-2">
        <small class="text-muted">
            <i class="fas fa-info-circle"></i>
            Use los botones superiores para navegar entre cuadrantes. Toque un diente para editarlo.
        </small>
    </div>
</div>

<style>
/* CSS adicional para responsividad */
.odontograma-responsive {
    max-width: 100%;
    overflow: hidden;
}

.odontograma-svg {
    width: 100%;
    height: auto;
    max-height: 70vh;
    border: 1px solid #e9ecef;
    border-radius: 8px;
    background: #f8f9fa;
}

/* Controles responsivos */
.odontograma-controls .btn {
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
}

.odontograma-controls .btn.active {
    background-color: #007bff;
    border-color: #007bff;
    color: white;
}

/* Adaptaciones para pantallas pequeñas */
@media (max-width: 576px) {
    .odontograma-svg {
        max-height: 50vh;
    }
    
    .odontograma-controls .btn {
        font-size: 0.65rem;
        padding: 0.2rem 0.4rem;
    }
}

@media (max-width: 768px) {
    .odontograma-svg {
        max-height: 60vh;
    }
}

/* Ocultar/mostrar elementos según breakpoints */
@media (min-width: 992px) {
    .odontograma-controls {
        display: none !important;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Funcionalidad de navegación por cuadrantes
    const botonesNavegacion = document.querySelectorAll('[data-cuadrante]');
    const cuadrantes = document.querySelectorAll('.cuadrante');
    
    botonesNavegacion.forEach(btn => {
        btn.addEventListener('click', function() {
            const cuadranteSeleccionado = this.dataset.cuadrante;
            
            // Actualizar botones activos
            botonesNavegacion.forEach(b => b.classList.remove('btn-primary', 'active'));
            botonesNavegacion.forEach(b => b.classList.add('btn-outline-secondary'));
            this.classList.remove('btn-outline-secondary');
            this.classList.add('btn-primary', 'active');
            
            if (cuadranteSeleccionado === 'all') {
                // Mostrar todos los cuadrantes
                cuadrantes.forEach(c => {
                    c.classList.remove('hidden', 'focused');
                });
            } else {
                // Mostrar solo el cuadrante seleccionado
                cuadrantes.forEach(c => {
                    const cuadranteId = c.id.split('-')[1];
                    if (cuadranteId === cuadranteSeleccionado) {
                        c.classList.remove('hidden');
                        c.classList.add('focused');
                    } else {
                        c.classList.add('hidden');
                        c.classList.remove('focused');
                    }
                });
            }
        });
    });
    
    // Inicializar con vista completa en dispositivos grandes
    if (window.innerWidth >= 992) {
        document.getElementById('btn-vista-completa')?.click();
    } else {
        // En dispositivos pequeños, iniciar con cuadrante 1
        document.querySelector('[data-cuadrante="1"]')?.click();
    }
    
    // Manejo de eventos de clic en dientes
    document.querySelectorAll('.diente').forEach(diente => {
        diente.addEventListener('click', function() {
            const dienteId = this.id.replace('diente-', '');
            console.log('Diente seleccionado:', dienteId);
            // Aquí puedes agregar la lógica para abrir modal de diagnóstico
            // Por ejemplo: abrirModalDiagnostico(dienteId);
        });
    });
});
</script>