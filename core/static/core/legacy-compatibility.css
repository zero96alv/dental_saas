/*
 * COMPATIBILIDAD CON DISPOSITIVOS ANTIGUOS
 * Soporte para iOS 9.3, Safari antiguo, Android < 7
 * Mantiene Bootstrap 5.3 moderno pero agrega fallbacks
 */

/* === DETECCIÓN DE DISPOSITIVO ANTIGUO === */
.legacy-device {
    /* Marcador CSS para dispositivos antiguos */
}

/* === FLEXBOX FALLBACKS === */
/* Soporte completo para flexbox en iOS 9.3 y Safari antiguo */

.legacy-device .d-flex {
    display: -webkit-box !important;
    display: -webkit-flex !important;
    display: -ms-flexbox !important;
    display: flex !important;
}

.legacy-device .d-inline-flex {
    display: -webkit-inline-box !important;
    display: -webkit-inline-flex !important;
    display: -ms-inline-flexbox !important;
    display: inline-flex !important;
}

.legacy-device .flex-row {
    -webkit-box-orient: horizontal !important;
    -webkit-box-direction: normal !important;
    -webkit-flex-direction: row !important;
    -ms-flex-direction: row !important;
    flex-direction: row !important;
}

.legacy-device .flex-column {
    -webkit-box-orient: vertical !important;
    -webkit-box-direction: normal !important;
    -webkit-flex-direction: column !important;
    -ms-flex-direction: column !important;
    flex-direction: column !important;
}

.legacy-device .flex-wrap {
    -webkit-flex-wrap: wrap !important;
    -ms-flex-wrap: wrap !important;
    flex-wrap: wrap !important;
}

.legacy-device .flex-nowrap {
    -webkit-flex-wrap: nowrap !important;
    -ms-flex-wrap: nowrap !important;
    flex-wrap: nowrap !important;
}

/* === JUSTIFY CONTENT === */
.legacy-device .justify-content-start {
    -webkit-box-pack: start !important;
    -webkit-justify-content: flex-start !important;
    -ms-flex-pack: start !important;
    justify-content: flex-start !important;
}

.legacy-device .justify-content-end {
    -webkit-box-pack: end !important;
    -webkit-justify-content: flex-end !important;
    -ms-flex-pack: end !important;
    justify-content: flex-end !important;
}

.legacy-device .justify-content-center {
    -webkit-box-pack: center !important;
    -webkit-justify-content: center !important;
    -ms-flex-pack: center !important;
    justify-content: center !important;
}

.legacy-device .justify-content-between {
    -webkit-box-pack: justify !important;
    -webkit-justify-content: space-between !important;
    -ms-flex-pack: justify !important;
    justify-content: space-between !important;
}

.legacy-device .justify-content-around {
    -webkit-justify-content: space-around !important;
    -ms-flex-pack: distribute !important;
    justify-content: space-around !important;
}

/* === ALIGN ITEMS === */
.legacy-device .align-items-start {
    -webkit-box-align: start !important;
    -webkit-align-items: flex-start !important;
    -ms-flex-align: start !important;
    align-items: flex-start !important;
}

.legacy-device .align-items-end {
    -webkit-box-align: end !important;
    -webkit-align-items: flex-end !important;
    -ms-flex-align: end !important;
    align-items: flex-end !important;
}

.legacy-device .align-items-center {
    -webkit-box-align: center !important;
    -webkit-align-items: center !important;
    -ms-flex-align: center !important;
    align-items: center !important;
}

.legacy-device .align-items-stretch {
    -webkit-box-align: stretch !important;
    -webkit-align-items: stretch !important;
    -ms-flex-align: stretch !important;
    align-items: stretch !important;
}

/* === FLEX GROW/SHRINK === */
.legacy-device .flex-grow-0 {
    -webkit-box-flex: 0 !important;
    -webkit-flex-grow: 0 !important;
    -ms-flex-positive: 0 !important;
    flex-grow: 0 !important;
}

.legacy-device .flex-grow-1 {
    -webkit-box-flex: 1 !important;
    -webkit-flex-grow: 1 !important;
    -ms-flex-positive: 1 !important;
    flex-grow: 1 !important;
}

.legacy-device .flex-shrink-0 {
    -webkit-flex-shrink: 0 !important;
    -ms-flex-negative: 0 !important;
    flex-shrink: 0 !important;
}

.legacy-device .flex-shrink-1 {
    -webkit-flex-shrink: 1 !important;
    -ms-flex-negative: 1 !important;
    flex-shrink: 1 !important;
}

/* === GRID SYSTEM FALLBACK === */
/* Bootstrap grid convertido a layout simple para dispositivos antiguos */

.legacy-device .container,
.legacy-device .container-fluid {
    width: 100% !important;
    padding-left: 15px !important;
    padding-right: 15px !important;
    margin-left: auto !important;
    margin-right: auto !important;
    max-width: none !important;
}

.legacy-device .row {
    display: block !important;
    margin-left: -15px !important;
    margin-right: -15px !important;
}

.legacy-device .row:after {
    content: "";
    display: table;
    clear: both;
}

.legacy-device [class*="col-"] {
    display: block !important;
    width: 100% !important;
    padding-left: 15px !important;
    padding-right: 15px !important;
    margin-bottom: 1rem !important;
    float: left !important;
}

/* Grid específico para tablet */
@media (min-width: 768px) {
    .legacy-device .col-md-6 {
        width: 50% !important;
    }
    .legacy-device .col-md-4 {
        width: 33.333333% !important;
    }
    .legacy-device .col-md-8 {
        width: 66.666667% !important;
    }
    .legacy-device .col-md-3 {
        width: 25% !important;
    }
    .legacy-device .col-md-9 {
        width: 75% !important;
    }
}

/* === NAVBAR COMPATIBILIDAD === */
.legacy-device .navbar {
    position: relative !important; /* No fixed para evitar problemas */
    padding: 1rem !important;
    min-height: 60px !important;
}

.legacy-device .navbar-brand {
    font-size: 1.25rem !important;
    line-height: 1.2 !important;
}

.legacy-device .navbar-nav {
    -webkit-flex-direction: column !important;
    -ms-flex-direction: column !important;
    flex-direction: column !important;
    width: 100% !important;
}

.legacy-device .navbar-nav .nav-item {
    width: 100% !important;
}

.legacy-device .navbar-toggler {
    display: block !important;
    float: right !important;
}

.legacy-device .navbar-collapse {
    display: none !important;
    width: 100% !important;
    clear: both !important;
}

.legacy-device .navbar-collapse.show {
    display: block !important;
}

/* === BUTTONS MEJORADOS PARA TOUCH === */
.legacy-device .btn {
    min-height: 44px !important; /* Apple touch target guidelines */
    padding: 12px 16px !important;
    border-radius: 6px !important;
    font-size: 16px !important; /* Evita zoom en iOS */
}

.legacy-device .btn-sm {
    min-height: 36px !important;
    padding: 8px 12px !important;
    font-size: 14px !important;
}

.legacy-device .btn-lg {
    min-height: 52px !important;
    padding: 16px 24px !important;
    font-size: 18px !important;
}

/* === FORMS OPTIMIZADOS === */
.legacy-device .form-control {
    font-size: 16px !important; /* Evita zoom en iOS */
    min-height: 44px !important;
    padding: 12px !important;
    border-radius: 6px !important;
}

.legacy-device .form-select {
    font-size: 16px !important;
    min-height: 44px !important;
}

/* === DROPDOWNS SIMPLIFICADOS === */
.legacy-device .dropdown {
    position: relative !important;
}

.legacy-device .dropdown-menu {
    position: static !important;
    display: none !important;
    float: none !important;
    width: 100% !important;
    margin: 0.5rem 0 !important;
    border-radius: 8px !important;
    box-shadow: 0 4px 8px rgba(0,0,0,0.15) !important;
}

.legacy-device .dropdown-menu.show {
    display: block !important;
}

.legacy-device .dropdown-item {
    padding: 12px 16px !important;
    font-size: 16px !important;
    min-height: 44px !important;
    display: block !important;
}

/* === CARDS SIMPLIFICADAS === */
.legacy-device .card {
    box-shadow: 0 2px 8px rgba(0,0,0,0.1) !important;
    border-radius: 8px !important;
    border: 1px solid #dee2e6 !important;
}

.legacy-device .card-header {
    background-color: #f8f9fa !important;
    border-bottom: 1px solid #dee2e6 !important;
    padding: 1rem !important;
}

.legacy-device .card-body {
    padding: 1rem !important;
}

/* === TABLES RESPONSIVAS === */
.legacy-device .table-responsive {
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch !important;
    border: 1px solid #dee2e6 !important;
    border-radius: 8px !important;
}

.legacy-device .table {
    margin-bottom: 0 !important;
    min-width: 600px !important; /* Asegurar scroll horizontal */
}

/* === MODALS MEJORADOS === */
.legacy-device .modal {
    padding-top: 20px !important;
}

.legacy-device .modal-dialog {
    margin: 20px !important;
    max-width: calc(100% - 40px) !important;
}

/* === BADGES Y ALERTS === */
.legacy-device .badge {
    padding: 6px 10px !important;
    font-size: 12px !important;
    border-radius: 4px !important;
}

.legacy-device .alert {
    border-radius: 8px !important;
    padding: 1rem !important;
}

/* === PROGRESS BARS === */
.legacy-device .progress {
    background-color: #e9ecef !important;
    border-radius: 4px !important;
    overflow: hidden !important;
}

/* === UTILITIES === */
.legacy-device .text-truncate {
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
}

/* === SPACING ADJUSTMENTS === */
.legacy-device .mb-4 {
    margin-bottom: 1.5rem !important;
}

.legacy-device .mt-4 {
    margin-top: 1.5rem !important;
}

.legacy-device .p-4 {
    padding: 1.5rem !important;
}

/* === PERFORMANCE OPTIMIZATIONS === */
.legacy-device * {
    -webkit-transform: translateZ(0); /* Hardware acceleration */
    transform: translateZ(0);
}

.legacy-device img {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

/* === PRINT STYLES === */
@media print {
    .legacy-device .navbar,
    .legacy-device .btn,
    .legacy-device .dropdown-menu {
        display: none !important;
    }
}

/* === LANDSCAPE ORIENTATION === */
@media screen and (orientation: landscape) and (max-height: 600px) {
    .legacy-device .navbar {
        padding: 0.5rem !important;
    }
    
    .legacy-device .btn {
        min-height: 36px !important;
        padding: 8px 12px !important;
    }
}